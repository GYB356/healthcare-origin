"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[537],{2111:function(e,n,r){r.d(n,{Z:function(){return c}}),r(7294);var t=r(6687),s=r(7052),a=r(5893),o=function(){var e,n=(0,s.aC)().user,r=(e={admin:[{name:"Users",href:"/admin/users",icon:"\uD83D\uDC65"},{name:"Settings",href:"/admin/settings",icon:"⚙️"},{name:"Reports",href:"/admin/reports",icon:"\uD83D\uDCC8"}],doctor:[{name:"Patients",href:"/doctor/patients",icon:"\uD83C\uDFE5"},{name:"Appointments",href:"/doctor/appointments",icon:"\uD83D\uDCC5"},{name:"Prescriptions",href:"/doctor/prescriptions",icon:"\uD83D\uDC8A"}],patient:[{name:"Appointments",href:"/patient/appointments",icon:"\uD83D\uDCC5"},{name:"Medical Records",href:"/patient/records",icon:"\uD83D\uDCCB"},{name:"Messages",href:"/patient/messages",icon:"✉️"}],nurse:[{name:"Patients",href:"/nurse/patients",icon:"\uD83C\uDFE5"},{name:"Schedule",href:"/nurse/schedule",icon:"\uD83D\uDCC5"}],staff:[{name:"Appointments",href:"/staff/appointments",icon:"\uD83D\uDCC5"},{name:"Billing",href:"/staff/billing",icon:"\uD83D\uDCB0"}]},[].concat([{name:"Dashboard",href:"/dashboard",icon:"\uD83D\uDCCA"},{name:"Profile",href:"/profile",icon:"\uD83D\uDC64"}],(0,t.Z)(null!=n&&n.role&&e[n.role]?e[n.role]:[])));return(0,a.jsxs)("aside",{className:"sidebar",children:[(0,a.jsx)("div",{className:"sidebar-header",children:(0,a.jsx)("h3",{children:null!=n&&n.role?"".concat(n.role.charAt(0).toUpperCase()+n.role.slice(1)," Portal"):"Portal"})}),(0,a.jsx)("nav",{className:"sidebar-nav",children:(0,a.jsx)("ul",{children:r.map(function(e){return(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:e.href,children:[(0,a.jsx)("span",{className:"icon",children:e.icon}),(0,a.jsx)("span",{className:"link-text",children:e.name})]})},e.name)})})})]})},i=function(){var e=(0,s.aC)(),n=e.user,r=e.logout;return(0,a.jsxs)("nav",{className:"navigation",children:[(0,a.jsx)("div",{className:"logo",children:(0,a.jsx)("span",{children:"Healthcare Portal"})}),(0,a.jsxs)("div",{className:"nav-links",children:[(0,a.jsx)("a",{href:"/dashboard",children:"Dashboard"}),(0,a.jsx)("a",{href:"/appointments",children:"Appointments"}),(0,a.jsx)("a",{href:"/messages",children:"Messages"}),(null==n?void 0:n.role)==="admin"&&(0,a.jsx)("a",{href:"/admin",children:"Admin"})]}),(0,a.jsxs)("div",{className:"user-menu",children:[(0,a.jsx)("span",{children:null==n?void 0:n.username}),(0,a.jsx)("button",{onClick:r,children:"Logout"})]})]})},c=function(e){var n=e.children,r=(0,s.aC)().isAuthenticated;return(0,a.jsx)("div",{className:"layout",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{}),(0,a.jsxs)("div",{className:"layout-container",children:[(0,a.jsx)(o,{}),(0,a.jsx)("main",{className:"main-content",children:n})]})]}):(0,a.jsx)("main",{className:"main-content-unauthenticated",children:n})})}},7383:function(e,n,r){r.d(n,{Z:function(){return u}});var t=r(29),s=r(4687),a=r.n(s),o=r(7294),i=r(3299),c=r(2947),l=r(5893);function u(e){var n,r,s,u,d,h=e.onConversationCreated,f=(0,i.useSession)().data,p=(0,o.useState)([]),m=p[0],v=p[1],x=(0,o.useState)(""),b=x[0],j=x[1],g=(0,o.useState)(!1),N=g[0],w=g[1];(0,o.useEffect)(function(){k()},[null==f||null===(s=f.user)||void 0===s?void 0:s.role]);var k=(n=(0,t.Z)(a().mark(function e(){var n,r,t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(null==f||null===(n=f.user)||void 0===n?void 0:n.role)==="doctor"?"patients":"doctors",e.next=4,fetch("/api/users/".concat(r));case 4:return t=e.sent,e.next=7,t.json();case 7:v(e.sent),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching users:",e.t0),c.Am.error("Failed to load users");case 15:case"end":return e.stop()}},e,null,[[0,11]])})),function(){return n.apply(this,arguments)}),C=(r=(0,t.Z)(a().mark(function e(n){var r,t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b){e.next=3;break}return e.abrupt("return");case 3:return w(!0),e.prev=4,e.next=7,fetch("/api/conversations/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctorId:(null==f||null===(r=f.user)||void 0===r?void 0:r.role)==="doctor"?f.user.id:b,patientId:(null==f||null===(t=f.user)||void 0===t?void 0:t.role)==="patient"?f.user.id:b})});case 7:if(e.sent.ok){e.next=10;break}throw Error("Failed to create conversation");case 10:c.Am.success("Conversation created successfully"),h(),j(""),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),console.error("Error creating conversation:",e.t0),c.Am.error("Failed to create conversation");case 19:return e.prev=19,w(!1),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[4,15,19,22]])})),function(e){return r.apply(this,arguments)});return(0,l.jsxs)("form",{onSubmit:C,className:"p-4 bg-white rounded-lg shadow",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Start New Conversation"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{htmlFor:"user",className:"block text-sm font-medium text-gray-700",children:["Select ",(null==f||null===(u=f.user)||void 0===u?void 0:u.role)==="doctor"?"Patient":"Doctor"]}),(0,l.jsxs)("select",{id:"user",value:b,onChange:function(e){return j(e.target.value)},className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",required:!0,children:[(0,l.jsxs)("option",{value:"",children:["Select a ",(null==f||null===(d=f.user)||void 0===d?void 0:d.role)==="doctor"?"patient":"doctor"]}),m.map(function(e){return(0,l.jsx)("option",{value:e.id,children:e.name},e.id)})]})]}),(0,l.jsx)("button",{type:"submit",disabled:N||!b,className:"w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 disabled:bg-blue-300 disabled:cursor-not-allowed",children:N?"Creating...":"Start Conversation"})]})]})}},756:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(3299),s=r(1163),a=r(7294),o=r(5893);function i(e){var n=e.children,r=e.allowedRoles,i=(0,t.useSession)(),c=i.data,l=i.status,u=(0,s.useRouter)();return((0,a.useEffect)(function(){if("unauthenticated"===l){u.push("/auth/signin");return}null!=c&&c.user&&r&&!r.includes(c.user.role)&&u.push("doctor"===c.user.role?"/doctor/dashboard":"/patient/dashboard")},[c,l,u,r]),"loading"===l)?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):null!=c&&c.user&&(!r||r.includes(c.user.role))?(0,o.jsx)(o.Fragment,{children:n}):null}},7052:function(e,n,r){r.d(n,{aC:function(){return d}});var t,s,a=r(29),o=r(4687),i=r.n(o),c=r(7294);r(5893);var l={isAuthenticated:!1,user:null,login:(t=(0,a.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{success:!1});case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),logout:function(){},register:(s=(0,a.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{success:!1});case 1:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)}),loading:!1,error:null,token:null},u=(0,c.createContext)(l);u.displayName="AuthContext";var d=function(){return(0,c.useContext)(u)}}}]);