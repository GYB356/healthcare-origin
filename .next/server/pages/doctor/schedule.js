(()=>{var e={};e.id=113,e.ids=[113,660],e.modules={5015:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>p});var a=r(6689),i=r(9870),o=r(476),n=r(1103),c=r(6201),l=r(1649),d=r(997),u=e([i,o,n,c]);function p(){let{data:e}=(0,l.useSession)(),{0:t,1:r}=(0,a.useState)([]),{0:s,1:u}=(0,a.useState)(!0);(0,a.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await fetch("/api/schedule"),t=await e.json();r(t.schedules.map(e=>({id:e.id,start:new Date(e.startTime),end:new Date(e.endTime),title:"Available"})))}catch(e){c.toast.error("Failed to fetch schedules")}finally{u(!1)}},h=async t=>{let r=t.view.calendar;try{(await fetch("/api/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startTime:t.start,endTime:t.end,doctorId:e?.user?.id})})).ok?(r.addEvent({id:String(Date.now()),title:"Available",start:t.start,end:t.end}),c.toast.success("Time slot added successfully"),p()):c.toast.error("Failed to add time slot")}catch(e){c.toast.error("Error adding time slot")}},m=async e=>{if(confirm("Would you like to remove this time slot?"))try{(await fetch(`/api/schedule/${e.event.id}`,{method:"DELETE"})).ok?(e.event.remove(),c.toast.success("Time slot removed successfully")):c.toast.error("Failed to remove time slot")}catch(e){c.toast.error("Error removing time slot")}};return s?d.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading..."}):(0,d.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow",children:[d.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Manage Schedule"}),d.jsx("div",{className:"h-[600px]",children:d.jsx(i.default,{plugins:[o.default,n.default],initialView:"timeGridWeek",selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,events:t,select:h,eventClick:m,slotMinTime:"08:00:00",slotMaxTime:"20:00:00",allDaySlot:!1,slotDuration:"00:30:00",headerToolbar:{left:"prev,next today",center:"title",right:"timeGridWeek,timeGridDay"}})})]})}[i,o,n,c]=u.then?(await u)():u,s()}catch(e){s(e)}})},6353:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>h});var a=r(8416),i=r.n(a),o=r(215),n=r.n(o),c=r(1649),l=r(3590);r(8819),r(6764);var d=r(997),u=e([l]);l=(u.then?(await u)():u)[0];let m=["session"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function h(e){let{Component:t,pageProps:{session:r}}=e,s=n()(e.pageProps,m);return(0,d.jsxs)(c.SessionProvider,{session:r,children:[d.jsx(l.ToastContainer,{position:"top-right"}),d.jsx(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){i()(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},s))]})}s()}catch(e){s(e)}})},1109:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>d});var a=r(1649),i=r(1163),o=r(5015),n=r(6201),c=r(997),l=e([o,n]);function d(){let{data:e,status:t}=(0,a.useSession)(),r=(0,i.useRouter)();return"loading"===t?c.jsx("div",{children:"Loading..."}):e&&"DOCTOR"===e.user.role?(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[c.jsx(n.Toaster,{position:"top-right"}),c.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Manage Your Schedule"}),c.jsx("div",{className:"bg-white rounded-lg shadow",children:c.jsx(o.Z,{})})]}):(r.push("/auth/signin"),null)}[o,n]=l.then?(await l)():l,s()}catch(e){s(e)}})},5408:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>g,default:()=>p,getServerSideProps:()=>f,getStaticPaths:()=>m,getStaticProps:()=>h,reportWebVitals:()=>x,routeModule:()=>P,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>j,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>v});var a=r(7093),i=r(5244),o=r(1323),n=r(4516),c=r.n(n),l=r(6353),d=r(1109),u=e([l,d]);[l,d]=u.then?(await u)():u;let p=(0,o.l)(d,"default"),h=(0,o.l)(d,"getStaticProps"),m=(0,o.l)(d,"getStaticPaths"),f=(0,o.l)(d,"getServerSideProps"),g=(0,o.l)(d,"config"),x=(0,o.l)(d,"reportWebVitals"),v=(0,o.l)(d,"unstable_getStaticProps"),b=(0,o.l)(d,"unstable_getStaticPaths"),y=(0,o.l)(d,"unstable_getStaticParams"),S=(0,o.l)(d,"unstable_getServerProps"),j=(0,o.l)(d,"unstable_getServerSideProps"),P=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/doctor/schedule",pathname:"/doctor/schedule",bundlePath:"",filename:""},components:{App:l.default,Document:c()},userland:d});s()}catch(e){s(e)}})},6764:()=>{},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},1103:e=>{"use strict";e.exports=import("@fullcalendar/interaction")},9870:e=>{"use strict";e.exports=import("@fullcalendar/react")},476:e=>{"use strict";e.exports=import("@fullcalendar/timegrid")},6201:e=>{"use strict";e.exports=import("react-hot-toast")},3590:e=>{"use strict";e.exports=import("react-toastify")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[516,212],()=>r(5408));module.exports=s})();