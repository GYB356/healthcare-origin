{"version":3,"names":["child_process_1","require","path","tslib_1","__importStar","MongoBinary_1","debug_1","__importDefault","utils_1","semver_1","events_1","mongodb_1","errors_1","lt","process","version","console","warn","log","default","MongoInstanceEvents","exports","MongoInstance","EventEmitter","constructor","opts","isInstancePrimary","isInstanceReady","isReplSet","instanceOpts","_objectSpread","instance","binaryOpts","binary","spawnOpts","spawn","on","instanceReady","debug","instanceError","err","toString","stop","msg","extra","port","create","start","prepareCommandArgs","assertion","isNullOrUndefined","Error","dbPath","result","push","replSet","storageEngine","ip","auth","keyfileLocation","KeyFileMissingError","final","concat","args","JSON","stringify","mongodProcess","pid","GenericMMSError","timeout","mongoBin","MongoBinary","getPath","checkBinaryPermissions","launch","Promise","res","rej","once","instanceClosed","launchInstanceClosed","timeoutTime","launchTimeout","setTimeout","emit","finally","clearTimeout","_launchMongod","killerProcess","_launchKiller","instanceStarted","stopPromise","isAlive","con","MongoClient","connect","uriTemplate","serverSelectionTimeoutMS","extraConnectionOptions","directConnection","admin","db","command","shutdown","force","timeoutSecs","MongoNetworkError","test","message","close","killProcess","undefined","childProcess","resolve","stdio","stderr","stderrHandler","bind","stdout","stdoutHandler","closeHandler","errorHandler","StartBinaryFailedError","unref","instanceLaunched","parentPid","childPid","killer","fork","__dirname","execArgv","detached","killerLaunched","instanceRawError","code","signal","platform","UnexpectedCloseError","line","trim","instanceSTDERR","checkErrorInLine","instanceSTDOUT","state","exec","instanceReplState","instancePrimary","StdoutInstanceError","execptionMatch","substring","index","length","execptionMatchJson","loadedJSON","parse","attr","error","liberrormatch","match","lib","toLocaleLowerCase","Symbol","asyncDispose"],"sources":["../../src/util/MongoInstance.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}