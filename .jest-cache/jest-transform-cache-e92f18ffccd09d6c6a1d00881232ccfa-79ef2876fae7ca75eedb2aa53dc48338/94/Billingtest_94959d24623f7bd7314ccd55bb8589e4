561fca3d4497d4eee4272d9656b27fdb
"use strict";

var _jsxFileName = "C:\\Users\\olari\\Downloads\\healthcare-main\\healthcare-main\\HealthcareSync\\frontend\\src\\tests\\Billing.test.js";
// Mock the child components
_getJestObj().mock('../components/billing/InvoiceList', () => {
  return function MockInvoiceList({
    onViewInvoice,
    onPayInvoice,
    onDeleteInvoice
  }) {
    return /*#__PURE__*/(0, _jsxRuntime.jsxs)("div", {
      "data-testid": "invoice-list",
      children: [/*#__PURE__*/(0, _jsxRuntime.jsx)("button", {
        "data-testid": "view-invoice-btn",
        onClick: () => onViewInvoice({
          id: '1',
          invoiceNumber: 'INV-001'
        }),
        children: "View Invoice"
      }), /*#__PURE__*/(0, _jsxRuntime.jsx)("button", {
        "data-testid": "pay-invoice-btn",
        onClick: () => onPayInvoice({
          id: '1',
          invoiceNumber: 'INV-001'
        }),
        children: "Pay Invoice"
      }), /*#__PURE__*/(0, _jsxRuntime.jsx)("button", {
        "data-testid": "delete-invoice-btn",
        onClick: () => onDeleteInvoice('1'),
        children: "Delete Invoice"
      })]
    });
  };
});
_getJestObj().mock('../components/billing/PaymentMethods', () => {
  return function MockPaymentMethods({
    onAddPaymentMethod,
    onEditPaymentMethod,
    onDeletePaymentMethod,
    onSelectPaymentMethod
  }) {
    return /*#__PURE__*/(0, _jsxRuntime.jsxs)("div", {
      "data-testid": "payment-methods",
      children: [/*#__PURE__*/(0, _jsxRuntime.jsx)("button", {
        "data-testid": "add-payment-btn",
        onClick: () => onAddPaymentMethod({
          id: '1',
          type: 'credit_card'
        }),
        children: "Add Payment Method"
      }), /*#__PURE__*/(0, _jsxRuntime.jsx)("button", {
        "data-testid": "edit-payment-btn",
        onClick: () => onEditPaymentMethod({
          id: '1',
          type: 'credit_card'
        }),
        children: "Edit Payment Method"
      }), /*#__PURE__*/(0, _jsxRuntime.jsx)("button", {
        "data-testid": "delete-payment-btn",
        onClick: () => onDeletePaymentMethod('1'),
        children: "Delete Payment Method"
      }), /*#__PURE__*/(0, _jsxRuntime.jsx)("button", {
        "data-testid": "select-payment-btn",
        onClick: () => onSelectPaymentMethod({
          id: '1',
          type: 'credit_card'
        }),
        children: "Select Payment Method"
      })]
    });
  };
});
_getJestObj().mock('../components/billing/InsuranceModal', () => {
  return function MockInsuranceModal({
    isOpen,
    onClose,
    onSave
  }) {
    if (!isOpen) return null;
    return /*#__PURE__*/(0, _jsxRuntime.jsxs)("div", {
      "data-testid": "insurance-modal",
      children: [/*#__PURE__*/(0, _jsxRuntime.jsx)("button", {
        "data-testid": "save-insurance-btn",
        onClick: () => onSave({
          id: '1',
          provider: 'Test Insurance'
        }),
        children: "Save Insurance"
      }), /*#__PURE__*/(0, _jsxRuntime.jsx)("button", {
        "data-testid": "close-insurance-btn",
        onClick: onClose,
        children: "Close"
      })]
    });
  };
});

// Mock fetch API
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
require("@testing-library/jest-dom");
var _Billing = _interopRequireDefault(require("../lib/Billing"));
var _AuthContext = require("../context/AuthContext");
var _SocketContext = require("../context/SocketContext");
var _jsxRuntime = require("react/jsx-runtime");
import React from "react";
var __jsx = React.createElement;
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
global.fetch = jest.fn();

// Mock socket
const mockSocket = {
  on: jest.fn(),
  off: jest.fn(),
  emit: jest.fn()
};

// Mock auth context
const mockAuthContext = {
  user: {
    id: 'user1',
    name: 'Test User',
    role: 'admin'
  },
  isAuthenticated: true
};

// Helper function to setup the component with mocks
const setupComponent = (authContextValue = mockAuthContext) => {
  return (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_AuthContext.AuthContext.Provider, {
    value: authContextValue,
    children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_SocketContext.SocketContext.Provider, {
      value: mockSocket,
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_Billing.default, {})
    })
  }));
};

// Mock successful fetch responses
const mockSuccessfulFetch = () => {
  global.fetch.mockImplementation(url => {
    if (url.includes('/api/billing/invoices')) {
      return Promise.resolve({
        ok: true,
        json: () => Promise.resolve([{
          id: '1',
          invoiceNumber: 'INV-001',
          patientName: 'John Doe',
          date: '2023-01-01',
          amount: 100,
          status: 'pending',
          description: 'General checkup'
        }])
      });
    } else if (url.includes('/api/billing/payment-methods')) {
      return Promise.resolve({
        ok: true,
        json: () => Promise.resolve([{
          id: '1',
          type: 'credit_card',
          cardholderName: 'John Doe',
          cardNumber: '****1234',
          expiryMonth: '12',
          expiryYear: '2025',
          isDefault: true
        }])
      });
    } else if (url.includes('/api/billing/insurance')) {
      return Promise.resolve({
        ok: true,
        json: () => Promise.resolve([{
          id: '1',
          provider: 'Blue Cross',
          policyNumber: 'POL123456',
          policyHolder: 'John Doe',
          coverageType: 'health'
        }])
      });
    }
    return Promise.resolve({
      ok: true,
      json: () => Promise.resolve({})
    });
  });
};

// Reset mocks before each test
beforeEach(() => {
  global.fetch.mockReset();
  mockSocket.on.mockReset();
  mockSocket.off.mockReset();
  mockSocket.emit.mockReset();
});
describe('Billing Component', () => {
  test('renders the billing component with tabs', async () => {
    mockSuccessfulFetch();
    setupComponent();

    // Wait for data to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Check if tabs are rendered
    expect(_react2.screen.getByText('Invoices')).toBeInTheDocument();
    expect(_react2.screen.getByText('Payment Methods')).toBeInTheDocument();
    expect(_react2.screen.getByText('Insurance')).toBeInTheDocument();
  });
  test('fetches invoices on component mount', async () => {
    mockSuccessfulFetch();
    setupComponent();
    await (0, _react2.waitFor)(() => {
      expect(global.fetch).toHaveBeenCalledWith('/api/billing/invoices');
    });
  });
  test('fetches payment methods on component mount', async () => {
    mockSuccessfulFetch();
    setupComponent();
    await (0, _react2.waitFor)(() => {
      expect(global.fetch).toHaveBeenCalledWith('/api/billing/payment-methods');
    });
  });
  test('fetches insurance information on component mount', async () => {
    mockSuccessfulFetch();
    setupComponent();
    await (0, _react2.waitFor)(() => {
      expect(global.fetch).toHaveBeenCalledWith('/api/billing/insurance');
    });
  });
  test('switches between tabs when clicked', async () => {
    mockSuccessfulFetch();
    setupComponent();

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Initially, Invoices tab should be active
    expect(_react2.screen.getByTestId('invoice-list')).toBeInTheDocument();

    // Click on Payment Methods tab
    _react2.fireEvent.click(_react2.screen.getByText('Payment Methods'));
    expect(_react2.screen.getByTestId('payment-methods')).toBeInTheDocument();

    // Click on Insurance tab
    _react2.fireEvent.click(_react2.screen.getByText('Insurance'));
    expect(_react2.screen.getByText('Insurance Information')).toBeInTheDocument();

    // Click back to Invoices tab
    _react2.fireEvent.click(_react2.screen.getByText('Invoices'));
    expect(_react2.screen.getByTestId('invoice-list')).toBeInTheDocument();
  });
  test('handles invoice search and filtering', async () => {
    mockSuccessfulFetch();
    setupComponent();

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Find search input and type in it
    const searchInput = _react2.screen.getByPlaceholderText('Search invoices...');
    _react2.fireEvent.change(searchInput, {
      target: {
        value: 'test search'
      }
    });

    // Check if search term state is updated (indirectly by checking if it's passed to InvoiceList)
    expect(searchInput.value).toBe('test search');

    // Test status filter
    const statusFilter = _react2.screen.getByLabelText('Status');
    _react2.fireEvent.change(statusFilter, {
      target: {
        value: 'paid'
      }
    });
    expect(statusFilter.value).toBe('paid');

    // Test date filter
    const dateFilter = _react2.screen.getByLabelText('Date');
    _react2.fireEvent.change(dateFilter, {
      target: {
        value: 'last30'
      }
    });
    expect(dateFilter.value).toBe('last30');
  });
  test('handles creating a new invoice', async () => {
    mockSuccessfulFetch();

    // Mock the POST request for creating an invoice
    global.fetch.mockImplementation((url, options) => {
      if (url === '/api/billing/invoices' && options.method === 'POST') {
        return Promise.resolve({
          ok: true,
          json: () => Promise.resolve({
            id: '2',
            invoiceNumber: 'INV-002',
            patientName: 'Jane Doe',
            date: '2023-02-01',
            amount: 200,
            status: 'pending',
            description: 'Specialist consultation'
          })
        });
      }

      // Default response for other fetch calls
      return mockSuccessfulFetch()(url);
    });
    setupComponent();

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Click on Create Invoice button
    _react2.fireEvent.click(_react2.screen.getByText('Create Invoice'));

    // Check if modal is opened
    expect(_react2.screen.getByText('Create New Invoice')).toBeInTheDocument();

    // Fill out the form
    _react2.fireEvent.change(_react2.screen.getByLabelText('Patient Name*'), {
      target: {
        value: 'Jane Doe'
      }
    });
    _react2.fireEvent.change(_react2.screen.getByLabelText('Amount ($)*'), {
      target: {
        value: '200'
      }
    });
    _react2.fireEvent.change(_react2.screen.getByLabelText('Description*'), {
      target: {
        value: 'Specialist consultation'
      }
    });

    // Submit the form
    _react2.fireEvent.click(_react2.screen.getByText('Create'));

    // Check if fetch was called with correct data
    await (0, _react2.waitFor)(() => {
      expect(global.fetch).toHaveBeenCalledWith('/api/billing/invoices', expect.objectContaining({
        method: 'POST',
        body: expect.any(String)
      }));
    });
  });
  test('handles viewing an invoice', async () => {
    mockSuccessfulFetch();
    setupComponent();

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Click on View Invoice button in the mocked InvoiceList
    _react2.fireEvent.click(_react2.screen.getByTestId('view-invoice-btn'));

    // Check if modal is opened
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Invoice Details')).toBeInTheDocument();
    });
  });
  test('handles paying an invoice', async () => {
    mockSuccessfulFetch();

    // Mock the POST request for paying an invoice
    global.fetch.mockImplementation((url, options) => {
      if (url.includes('/api/billing/invoices/1/pay') && options.method === 'POST') {
        return Promise.resolve({
          ok: true,
          json: () => Promise.resolve({
            id: '1',
            invoiceNumber: 'INV-001',
            status: 'paid'
          })
        });
      }

      // Default response for other fetch calls
      return mockSuccessfulFetch()(url);
    });
    setupComponent();

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Click on Pay Invoice button in the mocked InvoiceList
    _react2.fireEvent.click(_react2.screen.getByTestId('pay-invoice-btn'));

    // Check if payment modal is opened
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Pay Invoice')).toBeInTheDocument();
    });

    // Select a payment method and submit
    _react2.fireEvent.click(_react2.screen.getByTestId('select-payment-btn'));
    _react2.fireEvent.click(_react2.screen.getByText('Process Payment'));

    // Check if fetch was called with correct data
    await (0, _react2.waitFor)(() => {
      expect(global.fetch).toHaveBeenCalledWith('/api/billing/invoices/1/pay', expect.objectContaining({
        method: 'POST',
        body: expect.any(String)
      }));
    });
  });
  test('handles deleting an invoice', async () => {
    mockSuccessfulFetch();

    // Mock the DELETE request
    global.fetch.mockImplementation((url, options) => {
      if (url.includes('/api/billing/invoices/1') && options.method === 'DELETE') {
        return Promise.resolve({
          ok: true,
          json: () => Promise.resolve({
            success: true
          })
        });
      }

      // Default response for other fetch calls
      return mockSuccessfulFetch()(url);
    });

    // Mock window.confirm to return true
    window.confirm = jest.fn().mockImplementation(() => true);
    setupComponent();

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Click on Delete Invoice button in the mocked InvoiceList
    _react2.fireEvent.click(_react2.screen.getByTestId('delete-invoice-btn'));

    // Check if confirmation was shown
    expect(window.confirm).toHaveBeenCalled();

    // Check if fetch was called with correct method
    await (0, _react2.waitFor)(() => {
      expect(global.fetch).toHaveBeenCalledWith('/api/billing/invoices/1', expect.objectContaining({
        method: 'DELETE'
      }));
    });
  });
  test('handles adding a payment method', async () => {
    mockSuccessfulFetch();

    // Mock the POST request for adding a payment method
    global.fetch.mockImplementation((url, options) => {
      if (url === '/api/billing/payment-methods' && options.method === 'POST') {
        return Promise.resolve({
          ok: true,
          json: () => Promise.resolve({
            id: '2',
            type: 'credit_card',
            cardholderName: 'Jane Doe',
            cardNumber: '****5678'
          })
        });
      }

      // Default response for other fetch calls
      return mockSuccessfulFetch()(url);
    });
    setupComponent();

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Switch to Payment Methods tab
    _react2.fireEvent.click(_react2.screen.getByText('Payment Methods'));

    // Click on Add Payment Method button in the mocked PaymentMethods
    _react2.fireEvent.click(_react2.screen.getByTestId('add-payment-btn'));

    // Check if fetch was called with correct data
    await (0, _react2.waitFor)(() => {
      expect(global.fetch).toHaveBeenCalledWith('/api/billing/payment-methods', expect.objectContaining({
        method: 'POST',
        body: expect.any(String)
      }));
    });
  });
  test('handles adding insurance information', async () => {
    mockSuccessfulFetch();

    // Mock the POST request for adding insurance
    global.fetch.mockImplementation((url, options) => {
      if (url === '/api/billing/insurance' && options.method === 'POST') {
        return Promise.resolve({
          ok: true,
          json: () => Promise.resolve({
            id: '2',
            provider: 'Test Insurance',
            policyNumber: 'POL654321'
          })
        });
      }

      // Default response for other fetch calls
      return mockSuccessfulFetch()(url);
    });
    setupComponent();

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Switch to Insurance tab
    _react2.fireEvent.click(_react2.screen.getByText('Insurance'));

    // Click on Add Insurance button
    _react2.fireEvent.click(_react2.screen.getByText('Add Insurance'));

    // Check if insurance modal is opened
    expect(_react2.screen.getByTestId('insurance-modal')).toBeInTheDocument();

    // Save insurance
    _react2.fireEvent.click(_react2.screen.getByTestId('save-insurance-btn'));

    // Check if fetch was called with correct data
    await (0, _react2.waitFor)(() => {
      expect(global.fetch).toHaveBeenCalledWith('/api/billing/insurance', expect.objectContaining({
        method: 'POST'
      }));
    });
  });
  test('handles WebSocket events for real-time updates', async () => {
    mockSuccessfulFetch();
    setupComponent();

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Check if socket listeners were set up
    expect(mockSocket.on).toHaveBeenCalledWith('invoiceCreated', expect.any(Function));
    expect(mockSocket.on).toHaveBeenCalledWith('invoiceUpdated', expect.any(Function));
    expect(mockSocket.on).toHaveBeenCalledWith('invoiceDeleted', expect.any(Function));
    expect(mockSocket.on).toHaveBeenCalledWith('paymentMethodCreated', expect.any(Function));
    expect(mockSocket.on).toHaveBeenCalledWith('paymentMethodUpdated', expect.any(Function));
    expect(mockSocket.on).toHaveBeenCalledWith('paymentMethodDeleted', expect.any(Function));
    expect(mockSocket.on).toHaveBeenCalledWith('insuranceCreated', expect.any(Function));
    expect(mockSocket.on).toHaveBeenCalledWith('insuranceUpdated', expect.any(Function));
    expect(mockSocket.on).toHaveBeenCalledWith('insuranceDeleted', expect.any(Function));

    // Simulate a WebSocket event
    const invoiceCreatedHandler = mockSocket.on.mock.calls.find(call => call[0] === 'invoiceCreated')[1];

    // Call the handler with a new invoice
    invoiceCreatedHandler({
      id: '3',
      invoiceNumber: 'INV-003',
      patientName: 'New Patient',
      date: '2023-03-01',
      amount: 300,
      status: 'pending',
      description: 'Emergency visit'
    });

    // The state update should happen, but we can't easily test it directly
    // We could check if the component re-renders with the new data if needed
  });
  test('handles errors when fetching data', async () => {
    // Mock fetch to return an error
    global.fetch.mockImplementation(() => {
      return Promise.resolve({
        ok: false,
        json: () => Promise.resolve({
          message: 'Failed to fetch data'
        })
      });
    });
    setupComponent();

    // Wait for error to be displayed
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Error: Failed to fetch data')).toBeInTheDocument();
    });
  });
  test('restricts access based on user role', async () => {
    mockSuccessfulFetch();

    // Render with a patient role
    setupComponent({
      user: {
        id: 'user2',
        name: 'Patient User',
        role: 'patient'
      },
      isAuthenticated: true
    });

    // Wait for component to load
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Billing & Payments')).toBeInTheDocument();
    });

    // Patient should not see Create Invoice button
    expect(_react2.screen.queryByText('Create Invoice')).not.toBeInTheDocument();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJNb2NrSW52b2ljZUxpc3QiLCJvblZpZXdJbnZvaWNlIiwib25QYXlJbnZvaWNlIiwib25EZWxldGVJbnZvaWNlIiwiX2pzeFJ1bnRpbWUiLCJqc3hzIiwiY2hpbGRyZW4iLCJqc3giLCJvbkNsaWNrIiwiaWQiLCJpbnZvaWNlTnVtYmVyIiwiTW9ja1BheW1lbnRNZXRob2RzIiwib25BZGRQYXltZW50TWV0aG9kIiwib25FZGl0UGF5bWVudE1ldGhvZCIsIm9uRGVsZXRlUGF5bWVudE1ldGhvZCIsIm9uU2VsZWN0UGF5bWVudE1ldGhvZCIsInR5cGUiLCJNb2NrSW5zdXJhbmNlTW9kYWwiLCJpc09wZW4iLCJvbkNsb3NlIiwib25TYXZlIiwicHJvdmlkZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfQmlsbGluZyIsIl9BdXRoQ29udGV4dCIsIl9Tb2NrZXRDb250ZXh0IiwiUmVhY3QiLCJfX2pzeCIsImNyZWF0ZUVsZW1lbnQiLCJqZXN0IiwiZ2xvYmFsIiwiZmV0Y2giLCJmbiIsIm1vY2tTb2NrZXQiLCJvbiIsIm9mZiIsImVtaXQiLCJtb2NrQXV0aENvbnRleHQiLCJ1c2VyIiwibmFtZSIsInJvbGUiLCJpc0F1dGhlbnRpY2F0ZWQiLCJzZXR1cENvbXBvbmVudCIsImF1dGhDb250ZXh0VmFsdWUiLCJyZW5kZXIiLCJBdXRoQ29udGV4dCIsIlByb3ZpZGVyIiwidmFsdWUiLCJTb2NrZXRDb250ZXh0IiwiZGVmYXVsdCIsIm1vY2tTdWNjZXNzZnVsRmV0Y2giLCJtb2NrSW1wbGVtZW50YXRpb24iLCJ1cmwiLCJpbmNsdWRlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwib2siLCJqc29uIiwicGF0aWVudE5hbWUiLCJkYXRlIiwiYW1vdW50Iiwic3RhdHVzIiwiZGVzY3JpcHRpb24iLCJjYXJkaG9sZGVyTmFtZSIsImNhcmROdW1iZXIiLCJleHBpcnlNb250aCIsImV4cGlyeVllYXIiLCJpc0RlZmF1bHQiLCJwb2xpY3lOdW1iZXIiLCJwb2xpY3lIb2xkZXIiLCJjb3ZlcmFnZVR5cGUiLCJiZWZvcmVFYWNoIiwibW9ja1Jlc2V0IiwiZGVzY3JpYmUiLCJ0ZXN0Iiwid2FpdEZvciIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJnZXRCeVRlc3RJZCIsImZpcmVFdmVudCIsImNsaWNrIiwic2VhcmNoSW5wdXQiLCJnZXRCeVBsYWNlaG9sZGVyVGV4dCIsImNoYW5nZSIsInRhcmdldCIsInRvQmUiLCJzdGF0dXNGaWx0ZXIiLCJnZXRCeUxhYmVsVGV4dCIsImRhdGVGaWx0ZXIiLCJvcHRpb25zIiwibWV0aG9kIiwib2JqZWN0Q29udGFpbmluZyIsImJvZHkiLCJhbnkiLCJTdHJpbmciLCJzdWNjZXNzIiwid2luZG93IiwiY29uZmlybSIsInRvSGF2ZUJlZW5DYWxsZWQiLCJGdW5jdGlvbiIsImludm9pY2VDcmVhdGVkSGFuZGxlciIsImNhbGxzIiwiZmluZCIsImNhbGwiLCJtZXNzYWdlIiwicXVlcnlCeVRleHQiLCJub3QiXSwic291cmNlcyI6WyJCaWxsaW5nLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCAnQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbSc7XG5pbXBvcnQgQmlsbGluZyBmcm9tICcuLi9saWIvQmlsbGluZyc7XG5pbXBvcnQgeyBBdXRoQ29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgU29ja2V0Q29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQvU29ja2V0Q29udGV4dCc7XG5cbi8vIE1vY2sgdGhlIGNoaWxkIGNvbXBvbmVudHNcbmplc3QubW9jaygnLi4vY29tcG9uZW50cy9iaWxsaW5nL0ludm9pY2VMaXN0JywgKCkgPT4ge1xuICAgIHJldHVybiBmdW5jdGlvbiBNb2NrSW52b2ljZUxpc3QoeyBvblZpZXdJbnZvaWNlLCBvblBheUludm9pY2UsIG9uRGVsZXRlSW52b2ljZSB9KSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaW52b2ljZS1saXN0XCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cInZpZXctaW52b2ljZS1idG5cIiBvbkNsaWNrPXsoKSA9PiBvblZpZXdJbnZvaWNlKHsgaWQ6ICcxJywgaW52b2ljZU51bWJlcjogJ0lOVi0wMDEnIH0pfT5cbiAgICAgICAgICAgICAgICAgICAgVmlldyBJbnZvaWNlXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cInBheS1pbnZvaWNlLWJ0blwiIG9uQ2xpY2s9eygpID0+IG9uUGF5SW52b2ljZSh7IGlkOiAnMScsIGludm9pY2VOdW1iZXI6ICdJTlYtMDAxJyB9KX0+XG4gICAgICAgICAgICAgICAgICAgIFBheSBJbnZvaWNlXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cImRlbGV0ZS1pbnZvaWNlLWJ0blwiIG9uQ2xpY2s9eygpID0+IG9uRGVsZXRlSW52b2ljZSgnMScpfT5cbiAgICAgICAgICAgICAgICAgICAgRGVsZXRlIEludm9pY2VcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH07XG59KTtcblxuamVzdC5tb2NrKCcuLi9jb21wb25lbnRzL2JpbGxpbmcvUGF5bWVudE1ldGhvZHMnLCAoKSA9PiB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIE1vY2tQYXltZW50TWV0aG9kcyh7IG9uQWRkUGF5bWVudE1ldGhvZCwgb25FZGl0UGF5bWVudE1ldGhvZCwgb25EZWxldGVQYXltZW50TWV0aG9kLCBvblNlbGVjdFBheW1lbnRNZXRob2QgfSkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cInBheW1lbnQtbWV0aG9kc1wiPlxuICAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS10ZXN0aWQ9XCJhZGQtcGF5bWVudC1idG5cIiBvbkNsaWNrPXsoKSA9PiBvbkFkZFBheW1lbnRNZXRob2QoeyBpZDogJzEnLCB0eXBlOiAnY3JlZGl0X2NhcmQnIH0pfT5cbiAgICAgICAgICAgICAgICAgICAgQWRkIFBheW1lbnQgTWV0aG9kXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cImVkaXQtcGF5bWVudC1idG5cIiBvbkNsaWNrPXsoKSA9PiBvbkVkaXRQYXltZW50TWV0aG9kKHsgaWQ6ICcxJywgdHlwZTogJ2NyZWRpdF9jYXJkJyB9KX0+XG4gICAgICAgICAgICAgICAgICAgIEVkaXQgUGF5bWVudCBNZXRob2RcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwiZGVsZXRlLXBheW1lbnQtYnRuXCIgb25DbGljaz17KCkgPT4gb25EZWxldGVQYXltZW50TWV0aG9kKCcxJyl9PlxuICAgICAgICAgICAgICAgICAgICBEZWxldGUgUGF5bWVudCBNZXRob2RcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwic2VsZWN0LXBheW1lbnQtYnRuXCIgb25DbGljaz17KCkgPT4gb25TZWxlY3RQYXltZW50TWV0aG9kKHsgaWQ6ICcxJywgdHlwZTogJ2NyZWRpdF9jYXJkJyB9KX0+XG4gICAgICAgICAgICAgICAgICAgIFNlbGVjdCBQYXltZW50IE1ldGhvZFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfTtcbn0pO1xuXG5qZXN0Lm1vY2soJy4uL2NvbXBvbmVudHMvYmlsbGluZy9JbnN1cmFuY2VNb2RhbCcsICgpID0+IHtcbiAgICByZXR1cm4gZnVuY3Rpb24gTW9ja0luc3VyYW5jZU1vZGFsKHsgaXNPcGVuLCBvbkNsb3NlLCBvblNhdmUgfSkge1xuICAgICAgICBpZiAoIWlzT3BlbikgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGRhdGEtdGVzdGlkPVwiaW5zdXJhbmNlLW1vZGFsXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cInNhdmUtaW5zdXJhbmNlLWJ0blwiIG9uQ2xpY2s9eygpID0+IG9uU2F2ZSh7IGlkOiAnMScsIHByb3ZpZGVyOiAnVGVzdCBJbnN1cmFuY2UnIH0pfT5cbiAgICAgICAgICAgICAgICAgICAgU2F2ZSBJbnN1cmFuY2VcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtdGVzdGlkPVwiY2xvc2UtaW5zdXJhbmNlLWJ0blwiIG9uQ2xpY2s9e29uQ2xvc2V9PlxuICAgICAgICAgICAgICAgICAgICBDbG9zZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfTtcbn0pO1xuXG4vLyBNb2NrIGZldGNoIEFQSVxuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG4vLyBNb2NrIHNvY2tldFxuY29uc3QgbW9ja1NvY2tldCA9IHtcbiAgICBvbjogamVzdC5mbigpLFxuICAgIG9mZjogamVzdC5mbigpLFxuICAgIGVtaXQ6IGplc3QuZm4oKVxufTtcblxuLy8gTW9jayBhdXRoIGNvbnRleHRcbmNvbnN0IG1vY2tBdXRoQ29udGV4dCA9IHtcbiAgICB1c2VyOiB7XG4gICAgICAgIGlkOiAndXNlcjEnLFxuICAgICAgICBuYW1lOiAnVGVzdCBVc2VyJyxcbiAgICAgICAgcm9sZTogJ2FkbWluJ1xuICAgIH0sXG4gICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlXG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc2V0dXAgdGhlIGNvbXBvbmVudCB3aXRoIG1vY2tzXG5jb25zdCBzZXR1cENvbXBvbmVudCA9IChhdXRoQ29udGV4dFZhbHVlID0gbW9ja0F1dGhDb250ZXh0KSA9PiB7XG4gICAgcmV0dXJuIHJlbmRlcihcbiAgICAgICAgPEF1dGhDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXthdXRoQ29udGV4dFZhbHVlfT5cbiAgICAgICAgICAgIDxTb2NrZXRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXttb2NrU29ja2V0fT5cbiAgICAgICAgICAgICAgICA8QmlsbGluZyAvPlxuICAgICAgICAgICAgPC9Tb2NrZXRDb250ZXh0LlByb3ZpZGVyPlxuICAgICAgICA8L0F1dGhDb250ZXh0LlByb3ZpZGVyPlxuICAgICk7XG59O1xuXG4vLyBNb2NrIHN1Y2Nlc3NmdWwgZmV0Y2ggcmVzcG9uc2VzXG5jb25zdCBtb2NrU3VjY2Vzc2Z1bEZldGNoID0gKCkgPT4ge1xuICAgIGdsb2JhbC5mZXRjaC5tb2NrSW1wbGVtZW50YXRpb24oKHVybCkgPT4ge1xuICAgICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2JpbGxpbmcvaW52b2ljZXMnKSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGludm9pY2VOdW1iZXI6ICdJTlYtMDAxJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGllbnROYW1lOiAnSm9obiBEb2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogJzIwMjMtMDEtMDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnR2VuZXJhbCBjaGVja3VwJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9iaWxsaW5nL3BheW1lbnQtbWV0aG9kcycpKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJzEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NyZWRpdF9jYXJkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRob2xkZXJOYW1lOiAnSm9obiBEb2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlcjogJyoqKioxMjM0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyeU1vbnRoOiAnMTInLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5WWVhcjogJzIwMjUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNEZWZhdWx0OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2JpbGxpbmcvaW5zdXJhbmNlJykpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZShbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAnMScsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcjogJ0JsdWUgQ3Jvc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9saWN5TnVtYmVyOiAnUE9MMTIzNDU2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbGljeUhvbGRlcjogJ0pvaG4gRG9lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyYWdlVHlwZTogJ2hlYWx0aCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7fSlcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4vLyBSZXNldCBtb2NrcyBiZWZvcmUgZWFjaCB0ZXN0XG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgICBnbG9iYWwuZmV0Y2gubW9ja1Jlc2V0KCk7XG4gICAgbW9ja1NvY2tldC5vbi5tb2NrUmVzZXQoKTtcbiAgICBtb2NrU29ja2V0Lm9mZi5tb2NrUmVzZXQoKTtcbiAgICBtb2NrU29ja2V0LmVtaXQubW9ja1Jlc2V0KCk7XG59KTtcblxuZGVzY3JpYmUoJ0JpbGxpbmcgQ29tcG9uZW50JywgKCkgPT4ge1xuICAgIHRlc3QoJ3JlbmRlcnMgdGhlIGJpbGxpbmcgY29tcG9uZW50IHdpdGggdGFicycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1N1Y2Nlc3NmdWxGZXRjaCgpO1xuICAgICAgICBzZXR1cENvbXBvbmVudCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgZGF0YSB0byBsb2FkXG4gICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JpbGxpbmcgJiBQYXltZW50cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHRhYnMgYXJlIHJlbmRlcmVkXG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbnZvaWNlcycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUGF5bWVudCBNZXRob2RzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbnN1cmFuY2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdmZXRjaGVzIGludm9pY2VzIG9uIGNvbXBvbmVudCBtb3VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1N1Y2Nlc3NmdWxGZXRjaCgpO1xuICAgICAgICBzZXR1cENvbXBvbmVudCgpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9iaWxsaW5nL2ludm9pY2VzJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ2ZldGNoZXMgcGF5bWVudCBtZXRob2RzIG9uIGNvbXBvbmVudCBtb3VudCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1N1Y2Nlc3NmdWxGZXRjaCgpO1xuICAgICAgICBzZXR1cENvbXBvbmVudCgpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9iaWxsaW5nL3BheW1lbnQtbWV0aG9kcycpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdmZXRjaGVzIGluc3VyYW5jZSBpbmZvcm1hdGlvbiBvbiBjb21wb25lbnQgbW91bnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tTdWNjZXNzZnVsRmV0Y2goKTtcbiAgICAgICAgc2V0dXBDb21wb25lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvYmlsbGluZy9pbnN1cmFuY2UnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc3dpdGNoZXMgYmV0d2VlbiB0YWJzIHdoZW4gY2xpY2tlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1N1Y2Nlc3NmdWxGZXRjaCgpO1xuICAgICAgICBzZXR1cENvbXBvbmVudCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgY29tcG9uZW50IHRvIGxvYWRcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmlsbGluZyAmIFBheW1lbnRzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gSW5pdGlhbGx5LCBJbnZvaWNlcyB0YWIgc2hvdWxkIGJlIGFjdGl2ZVxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdpbnZvaWNlLWxpc3QnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsaWNrIG9uIFBheW1lbnQgTWV0aG9kcyB0YWJcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ1BheW1lbnQgTWV0aG9kcycpKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncGF5bWVudC1tZXRob2RzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbGljayBvbiBJbnN1cmFuY2UgdGFiXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdJbnN1cmFuY2UnKSk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbnN1cmFuY2UgSW5mb3JtYXRpb24nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsaWNrIGJhY2sgdG8gSW52b2ljZXMgdGFiXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdJbnZvaWNlcycpKTtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnaW52b2ljZS1saXN0JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnaGFuZGxlcyBpbnZvaWNlIHNlYXJjaCBhbmQgZmlsdGVyaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBtb2NrU3VjY2Vzc2Z1bEZldGNoKCk7XG4gICAgICAgIHNldHVwQ29tcG9uZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBXYWl0IGZvciBjb21wb25lbnQgdG8gbG9hZFxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCaWxsaW5nICYgUGF5bWVudHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGaW5kIHNlYXJjaCBpbnB1dCBhbmQgdHlwZSBpbiBpdFxuICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgnU2VhcmNoIGludm9pY2VzLi4uJyk7XG4gICAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2VhcmNoSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiAndGVzdCBzZWFyY2gnIH0gfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBzZWFyY2ggdGVybSBzdGF0ZSBpcyB1cGRhdGVkIChpbmRpcmVjdGx5IGJ5IGNoZWNraW5nIGlmIGl0J3MgcGFzc2VkIHRvIEludm9pY2VMaXN0KVxuICAgICAgICBleHBlY3Qoc2VhcmNoSW5wdXQudmFsdWUpLnRvQmUoJ3Rlc3Qgc2VhcmNoJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBUZXN0IHN0YXR1cyBmaWx0ZXJcbiAgICAgICAgY29uc3Qgc3RhdHVzRmlsdGVyID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdTdGF0dXMnKTtcbiAgICAgICAgZmlyZUV2ZW50LmNoYW5nZShzdGF0dXNGaWx0ZXIsIHsgdGFyZ2V0OiB7IHZhbHVlOiAncGFpZCcgfSB9KTtcbiAgICAgICAgZXhwZWN0KHN0YXR1c0ZpbHRlci52YWx1ZSkudG9CZSgncGFpZCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gVGVzdCBkYXRlIGZpbHRlclxuICAgICAgICBjb25zdCBkYXRlRmlsdGVyID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdEYXRlJyk7XG4gICAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZGF0ZUZpbHRlciwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdsYXN0MzAnIH0gfSk7XG4gICAgICAgIGV4cGVjdChkYXRlRmlsdGVyLnZhbHVlKS50b0JlKCdsYXN0MzAnKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdoYW5kbGVzIGNyZWF0aW5nIGEgbmV3IGludm9pY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tTdWNjZXNzZnVsRmV0Y2goKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1vY2sgdGhlIFBPU1QgcmVxdWVzdCBmb3IgY3JlYXRpbmcgYW4gaW52b2ljZVxuICAgICAgICBnbG9iYWwuZmV0Y2gubW9ja0ltcGxlbWVudGF0aW9uKCh1cmwsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIGlmICh1cmwgPT09ICcvYXBpL2JpbGxpbmcvaW52b2ljZXMnICYmIG9wdGlvbnMubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJzInLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW52b2ljZU51bWJlcjogJ0lOVi0wMDInLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aWVudE5hbWU6ICdKYW5lIERvZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiAnMjAyMy0wMi0wMScsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTcGVjaWFsaXN0IGNvbnN1bHRhdGlvbidcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGVmYXVsdCByZXNwb25zZSBmb3Igb3RoZXIgZmV0Y2ggY2FsbHNcbiAgICAgICAgICAgIHJldHVybiBtb2NrU3VjY2Vzc2Z1bEZldGNoKCkodXJsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzZXR1cENvbXBvbmVudCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgY29tcG9uZW50IHRvIGxvYWRcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmlsbGluZyAmIFBheW1lbnRzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xpY2sgb24gQ3JlYXRlIEludm9pY2UgYnV0dG9uXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdDcmVhdGUgSW52b2ljZScpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIG1vZGFsIGlzIG9wZW5lZFxuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ3JlYXRlIE5ldyBJbnZvaWNlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBGaWxsIG91dCB0aGUgZm9ybVxuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnUGF0aWVudCBOYW1lKicpLCB7IHRhcmdldDogeyB2YWx1ZTogJ0phbmUgRG9lJyB9IH0pO1xuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgnQW1vdW50ICgkKSonKSwgeyB0YXJnZXQ6IHsgdmFsdWU6ICcyMDAnIH0gfSk7XG4gICAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KCdEZXNjcmlwdGlvbionKSwgeyB0YXJnZXQ6IHsgdmFsdWU6ICdTcGVjaWFsaXN0IGNvbnN1bHRhdGlvbicgfSB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN1Ym1pdCB0aGUgZm9ybVxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnQ3JlYXRlJykpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgZmV0Y2ggd2FzIGNhbGxlZCB3aXRoIGNvcnJlY3QgZGF0YVxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChnbG9iYWwuZmV0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL2JpbGxpbmcvaW52b2ljZXMnLCBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ2hhbmRsZXMgdmlld2luZyBhbiBpbnZvaWNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBtb2NrU3VjY2Vzc2Z1bEZldGNoKCk7XG4gICAgICAgIHNldHVwQ29tcG9uZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBXYWl0IGZvciBjb21wb25lbnQgdG8gbG9hZFxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCaWxsaW5nICYgUGF5bWVudHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbGljayBvbiBWaWV3IEludm9pY2UgYnV0dG9uIGluIHRoZSBtb2NrZWQgSW52b2ljZUxpc3RcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgndmlldy1pbnZvaWNlLWJ0bicpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIG1vZGFsIGlzIG9wZW5lZFxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdJbnZvaWNlIERldGFpbHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnaGFuZGxlcyBwYXlpbmcgYW4gaW52b2ljZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1N1Y2Nlc3NmdWxGZXRjaCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gTW9jayB0aGUgUE9TVCByZXF1ZXN0IGZvciBwYXlpbmcgYW4gaW52b2ljZVxuICAgICAgICBnbG9iYWwuZmV0Y2gubW9ja0ltcGxlbWVudGF0aW9uKCh1cmwsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvYmlsbGluZy9pbnZvaWNlcy8xL3BheScpICYmIG9wdGlvbnMubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJzEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW52b2ljZU51bWJlcjogJ0lOVi0wMDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAncGFpZCdcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGVmYXVsdCByZXNwb25zZSBmb3Igb3RoZXIgZmV0Y2ggY2FsbHNcbiAgICAgICAgICAgIHJldHVybiBtb2NrU3VjY2Vzc2Z1bEZldGNoKCkodXJsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzZXR1cENvbXBvbmVudCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgY29tcG9uZW50IHRvIGxvYWRcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmlsbGluZyAmIFBheW1lbnRzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xpY2sgb24gUGF5IEludm9pY2UgYnV0dG9uIGluIHRoZSBtb2NrZWQgSW52b2ljZUxpc3RcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRlc3RJZCgncGF5LWludm9pY2UtYnRuJykpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgcGF5bWVudCBtb2RhbCBpcyBvcGVuZWRcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUGF5IEludm9pY2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZWxlY3QgYSBwYXltZW50IG1ldGhvZCBhbmQgc3VibWl0XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXN0SWQoJ3NlbGVjdC1wYXltZW50LWJ0bicpKTtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ1Byb2Nlc3MgUGF5bWVudCcpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIGZldGNoIHdhcyBjYWxsZWQgd2l0aCBjb3JyZWN0IGRhdGFcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9iaWxsaW5nL2ludm9pY2VzLzEvcGF5JywgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGJvZHk6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdoYW5kbGVzIGRlbGV0aW5nIGFuIGludm9pY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tTdWNjZXNzZnVsRmV0Y2goKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1vY2sgdGhlIERFTEVURSByZXF1ZXN0XG4gICAgICAgIGdsb2JhbC5mZXRjaC5tb2NrSW1wbGVtZW50YXRpb24oKHVybCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9iaWxsaW5nL2ludm9pY2VzLzEnKSAmJiBvcHRpb25zLm1ldGhvZCA9PT0gJ0RFTEVURScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGVmYXVsdCByZXNwb25zZSBmb3Igb3RoZXIgZmV0Y2ggY2FsbHNcbiAgICAgICAgICAgIHJldHVybiBtb2NrU3VjY2Vzc2Z1bEZldGNoKCkodXJsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBNb2NrIHdpbmRvdy5jb25maXJtIHRvIHJldHVybiB0cnVlXG4gICAgICAgIHdpbmRvdy5jb25maXJtID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIHNldHVwQ29tcG9uZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBXYWl0IGZvciBjb21wb25lbnQgdG8gbG9hZFxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCaWxsaW5nICYgUGF5bWVudHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbGljayBvbiBEZWxldGUgSW52b2ljZSBidXR0b24gaW4gdGhlIG1vY2tlZCBJbnZvaWNlTGlzdFxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdkZWxldGUtaW52b2ljZS1idG4nKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBjb25maXJtYXRpb24gd2FzIHNob3duXG4gICAgICAgIGV4cGVjdCh3aW5kb3cuY29uZmlybSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgZmV0Y2ggd2FzIGNhbGxlZCB3aXRoIGNvcnJlY3QgbWV0aG9kXG4gICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvYmlsbGluZy9pbnZvaWNlcy8xJywgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnaGFuZGxlcyBhZGRpbmcgYSBwYXltZW50IG1ldGhvZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1N1Y2Nlc3NmdWxGZXRjaCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gTW9jayB0aGUgUE9TVCByZXF1ZXN0IGZvciBhZGRpbmcgYSBwYXltZW50IG1ldGhvZFxuICAgICAgICBnbG9iYWwuZmV0Y2gubW9ja0ltcGxlbWVudGF0aW9uKCh1cmwsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIGlmICh1cmwgPT09ICcvYXBpL2JpbGxpbmcvcGF5bWVudC1tZXRob2RzJyAmJiBvcHRpb25zLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICcyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVkaXRfY2FyZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkaG9sZGVyTmFtZTogJ0phbmUgRG9lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXI6ICcqKioqNTY3OCdcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGVmYXVsdCByZXNwb25zZSBmb3Igb3RoZXIgZmV0Y2ggY2FsbHNcbiAgICAgICAgICAgIHJldHVybiBtb2NrU3VjY2Vzc2Z1bEZldGNoKCkodXJsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBzZXR1cENvbXBvbmVudCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgY29tcG9uZW50IHRvIGxvYWRcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmlsbGluZyAmIFBheW1lbnRzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU3dpdGNoIHRvIFBheW1lbnQgTWV0aG9kcyB0YWJcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ1BheW1lbnQgTWV0aG9kcycpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsaWNrIG9uIEFkZCBQYXltZW50IE1ldGhvZCBidXR0b24gaW4gdGhlIG1vY2tlZCBQYXltZW50TWV0aG9kc1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdhZGQtcGF5bWVudC1idG4nKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBmZXRjaCB3YXMgY2FsbGVkIHdpdGggY29ycmVjdCBkYXRhXG4gICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvYmlsbGluZy9wYXltZW50LW1ldGhvZHMnLCBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgYm9keTogZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ2hhbmRsZXMgYWRkaW5nIGluc3VyYW5jZSBpbmZvcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1N1Y2Nlc3NmdWxGZXRjaCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gTW9jayB0aGUgUE9TVCByZXF1ZXN0IGZvciBhZGRpbmcgaW5zdXJhbmNlXG4gICAgICAgIGdsb2JhbC5mZXRjaC5tb2NrSW1wbGVtZW50YXRpb24oKHVybCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgaWYgKHVybCA9PT0gJy9hcGkvYmlsbGluZy9pbnN1cmFuY2UnICYmIG9wdGlvbnMubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJzInLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXI6ICdUZXN0IEluc3VyYW5jZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2xpY3lOdW1iZXI6ICdQT0w2NTQzMjEnXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERlZmF1bHQgcmVzcG9uc2UgZm9yIG90aGVyIGZldGNoIGNhbGxzXG4gICAgICAgICAgICByZXR1cm4gbW9ja1N1Y2Nlc3NmdWxGZXRjaCgpKHVybCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgc2V0dXBDb21wb25lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFdhaXQgZm9yIGNvbXBvbmVudCB0byBsb2FkXG4gICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0JpbGxpbmcgJiBQYXltZW50cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN3aXRjaCB0byBJbnN1cmFuY2UgdGFiXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdJbnN1cmFuY2UnKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbGljayBvbiBBZGQgSW5zdXJhbmNlIGJ1dHRvblxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dCgnQWRkIEluc3VyYW5jZScpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIGluc3VyYW5jZSBtb2RhbCBpcyBvcGVuZWRcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnaW5zdXJhbmNlLW1vZGFsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTYXZlIGluc3VyYW5jZVxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGVzdElkKCdzYXZlLWluc3VyYW5jZS1idG4nKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBmZXRjaCB3YXMgY2FsbGVkIHdpdGggY29ycmVjdCBkYXRhXG4gICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KGdsb2JhbC5mZXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvYmlsbGluZy9pbnN1cmFuY2UnLCBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnaGFuZGxlcyBXZWJTb2NrZXQgZXZlbnRzIGZvciByZWFsLXRpbWUgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgbW9ja1N1Y2Nlc3NmdWxGZXRjaCgpO1xuICAgICAgICBzZXR1cENvbXBvbmVudCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgY29tcG9uZW50IHRvIGxvYWRcbiAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQmlsbGluZyAmIFBheW1lbnRzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgc29ja2V0IGxpc3RlbmVycyB3ZXJlIHNldCB1cFxuICAgICAgICBleHBlY3QobW9ja1NvY2tldC5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2ludm9pY2VDcmVhdGVkJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgICAgICBleHBlY3QobW9ja1NvY2tldC5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2ludm9pY2VVcGRhdGVkJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgICAgICBleHBlY3QobW9ja1NvY2tldC5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2ludm9pY2VEZWxldGVkJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgICAgICBleHBlY3QobW9ja1NvY2tldC5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BheW1lbnRNZXRob2RDcmVhdGVkJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgICAgICBleHBlY3QobW9ja1NvY2tldC5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BheW1lbnRNZXRob2RVcGRhdGVkJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgICAgICBleHBlY3QobW9ja1NvY2tldC5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BheW1lbnRNZXRob2REZWxldGVkJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgICAgICBleHBlY3QobW9ja1NvY2tldC5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2luc3VyYW5jZUNyZWF0ZWQnLCBleHBlY3QuYW55KEZ1bmN0aW9uKSk7XG4gICAgICAgIGV4cGVjdChtb2NrU29ja2V0Lm9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnaW5zdXJhbmNlVXBkYXRlZCcsIGV4cGVjdC5hbnkoRnVuY3Rpb24pKTtcbiAgICAgICAgZXhwZWN0KG1vY2tTb2NrZXQub24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdpbnN1cmFuY2VEZWxldGVkJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2ltdWxhdGUgYSBXZWJTb2NrZXQgZXZlbnRcbiAgICAgICAgY29uc3QgaW52b2ljZUNyZWF0ZWRIYW5kbGVyID0gbW9ja1NvY2tldC5vbi5tb2NrLmNhbGxzLmZpbmQoY2FsbCA9PiBjYWxsWzBdID09PSAnaW52b2ljZUNyZWF0ZWQnKVsxXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGwgdGhlIGhhbmRsZXIgd2l0aCBhIG5ldyBpbnZvaWNlXG4gICAgICAgIGludm9pY2VDcmVhdGVkSGFuZGxlcih7XG4gICAgICAgICAgICBpZDogJzMnLFxuICAgICAgICAgICAgaW52b2ljZU51bWJlcjogJ0lOVi0wMDMnLFxuICAgICAgICAgICAgcGF0aWVudE5hbWU6ICdOZXcgUGF0aWVudCcsXG4gICAgICAgICAgICBkYXRlOiAnMjAyMy0wMy0wMScsXG4gICAgICAgICAgICBhbW91bnQ6IDMwMCxcbiAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFbWVyZ2VuY3kgdmlzaXQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVGhlIHN0YXRlIHVwZGF0ZSBzaG91bGQgaGFwcGVuLCBidXQgd2UgY2FuJ3QgZWFzaWx5IHRlc3QgaXQgZGlyZWN0bHlcbiAgICAgICAgLy8gV2UgY291bGQgY2hlY2sgaWYgdGhlIGNvbXBvbmVudCByZS1yZW5kZXJzIHdpdGggdGhlIG5ldyBkYXRhIGlmIG5lZWRlZFxuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ2hhbmRsZXMgZXJyb3JzIHdoZW4gZmV0Y2hpbmcgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gTW9jayBmZXRjaCB0byByZXR1cm4gYW4gZXJyb3JcbiAgICAgICAgZ2xvYmFsLmZldGNoLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBvazogZmFsc2UsXG4gICAgICAgICAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBkYXRhJyB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgc2V0dXBDb21wb25lbnQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFdhaXQgZm9yIGVycm9yIHRvIGJlIGRpc3BsYXllZFxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdFcnJvcjogRmFpbGVkIHRvIGZldGNoIGRhdGEnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgncmVzdHJpY3RzIGFjY2VzcyBiYXNlZCBvbiB1c2VyIHJvbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIG1vY2tTdWNjZXNzZnVsRmV0Y2goKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlciB3aXRoIGEgcGF0aWVudCByb2xlXG4gICAgICAgIHNldHVwQ29tcG9uZW50KHtcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICBpZDogJ3VzZXIyJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnUGF0aWVudCBVc2VyJyxcbiAgICAgICAgICAgICAgICByb2xlOiAncGF0aWVudCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBXYWl0IGZvciBjb21wb25lbnQgdG8gbG9hZFxuICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdCaWxsaW5nICYgUGF5bWVudHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBQYXRpZW50IHNob3VsZCBub3Qgc2VlIENyZWF0ZSBJbnZvaWNlIGJ1dHRvblxuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdDcmVhdGUgSW52b2ljZScpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbn0pOyAiXSwibWFwcGluZ3MiOiI7OztBQU9BO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLG1DQUFtQyxFQUFFLE1BQU07RUFDakQsT0FBTyxTQUFTQyxlQUFlQSxDQUFDO0lBQUVDLGFBQWE7SUFBRUMsWUFBWTtJQUFFQztFQUFnQixDQUFDLEVBQUU7SUFDOUUsb0JBQ0ksSUFBQUMsV0FBQSxDQUFBQyxJQUFBO01BQUssZUFBWSxjQUFjO01BQUFDLFFBQUEsZ0JBQzNCLElBQUFGLFdB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