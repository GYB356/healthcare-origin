{"version":3,"names":["get_port_1","tslib_1","__importDefault","require","utils_1","MongoInstance_1","debug_1","events_1","fs_1","mongodb_1","errors_1","os","__importStar","log","default","MongoMemoryServerEvents","exports","MongoMemoryServerStates","MongoMemoryServer","EventEmitter","constructor","opts","_state","new","Object","assign","isNullOrUndefined","auth","authDefault","create","instance","start","forceSamePort","debug","stopped","running","starting","StateError","state","assertion","_a","_instanceInfo","mongodProcess","Error","stateChange","_startUpInstance","catch","err","__awaiter","_b","message","includes","platform","arch","enabled","console","warn","stop","doCleanup","force","newState","emit","msg","extra","port","getNewPort","newPort","getStartOptions","instOpts","isNew","undefined","data","dbName","generateDbName","ip","storageEngine","_c","replSet","dbPath","tmpDir","keyfileLocation","launchTimeout","createTmpDir","files","promises","readdir","length","enableAuth","authObjectEnable","createAuth","mongodOptions","args","binary","spawn","instanceOpts","MongoInstance","extraConnectionOptions","authSource","authMechanism","username","customRootName","password","customRootPwd","disable","cleanupOptions","cleanup","pid","options","assertionIsMMSState","removeDir","res","statPath","isDirectory","instanceInfo","ensureInstance","EnsureInstanceError","Promise","rej","once","getUri","otherDb","otherIp","assertionInstanceInfo","uriTemplate","con","MongoClient","connect","db","command","createUser","pwd","mechanisms","customData","createdBy","as","roles","writeConcern","w","extraUsers","sort","a","b","database","close","user","databaseName","authenticationRestrictions","digestPassword","_d","val","wantedState","currentState"],"sources":["../src/MongoMemoryServer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}