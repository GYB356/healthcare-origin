{"version":3,"names":["_getJestObj","mock","originalModule","jest","requireActual","_objectSpread","useAuth","token","user","role","_interopRequireDefault","require","_defineProperty2","_react","_react2","_ConsultationReport","_jestFetchMock","_jsxRuntime","_jsxFileName","React","__jsx","createElement","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","arguments","length","forEach","default","getOwnPropertyDescriptors","defineProperties","defineProperty","describe","beforeEach","fetchMock","resetMocks","test","render","jsx","appointmentId","transcript","expect","screen","getByText","toBeInTheDocument","mockResponseOnce","JSON","stringify","report","medicalInfo","symptoms","diagnosis","recommendations","medications","followUpNeeded","followUpQuestions","fireEvent","click","waitFor","mockRejectOnce","Error"],"sources":["ConsultationReport.test.tsx"],"sourcesContent":["import React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport ConsultationReport from '../../components/ConsultationReport';\nimport { AuthProvider } from '../../context/AuthContext';\nimport fetchMock from 'jest-fetch-mock';\n\n// Mock the useAuth hook\njest.mock('../../context/AuthContext', () => {\n  const originalModule = jest.requireActual('../../context/AuthContext');\n  return {\n    ...originalModule,\n    useAuth: () => ({\n      token: 'mock-token',\n      user: { role: 'doctor' },\n    }),\n  };\n});\n\ndescribe('ConsultationReport', () => {\n  beforeEach(() => {\n    fetchMock.resetMocks();\n  });\n\n  test('renders without crashing', () => {\n    render(<ConsultationReport appointmentId=\"123\" transcript=\"Test transcript\" />);\n    expect(screen.getByText(/Consultation Report/i)).toBeInTheDocument();\n  });\n\n  test('shows generate button when transcript is provided', () => {\n    render(<ConsultationReport appointmentId=\"123\" transcript=\"Test transcript\" />);\n    expect(screen.getByText(/Generate Full Report/i)).toBeInTheDocument();\n  });\n\n  test('shows message when transcript is not available', () => {\n    render(<ConsultationReport appointmentId=\"123\" transcript=\"\" />);\n    expect(screen.getByText(/No consultation transcript available/i)).toBeInTheDocument();\n  });\n\n  test('generates report on button click', async () => {\n    fetchMock.mockResponseOnce(JSON.stringify({\n      report: {\n        report: 'Test report content',\n        medicalInfo: {\n          symptoms: ['Symptom 1'],\n          diagnosis: 'Test diagnosis',\n          recommendations: ['Recommendation 1'],\n          medications: [],\n          followUpNeeded: false\n        },\n        followUpQuestions: 'Test follow-up questions'\n      }\n    }));\n\n    render(<ConsultationReport appointmentId=\"123\" transcript=\"Test transcript\" />);\n    \n    // Click generate report button\n    fireEvent.click(screen.getByText(/Generate Full Report/i));\n    \n    // Wait for the report to be displayed\n    await waitFor(() => {\n      expect(screen.getByText(/Test report content/i)).toBeInTheDocument();\n    });\n  });\n\n  test('shows error message when report generation fails', async () => {\n    fetchMock.mockRejectOnce(new Error('Failed to generate report'));\n\n    render(<ConsultationReport appointmentId=\"123\" transcript=\"Test transcript\" />);\n    \n    // Click generate report button\n    fireEvent.click(screen.getByText(/Generate Full Report/i));\n    \n    // Wait for the error message to be displayed\n    await waitFor(() => {\n      expect(screen.getByText(/Failed to generate report. Please try again./i)).toBeInTheDocument();\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}