{"version":3,"names":["getport_1","require","utils_1","MongoInstance_1","debug_1","tslib_1","__importDefault","events_1","fs_1","mongodb_1","errors_1","os","__importStar","DryMongoBinary_1","semver","log","default","MongoMemoryServerEvents","exports","MongoMemoryServerStates","MongoMemoryServer","EventEmitter","constructor","opts","_state","new","_objectSpread","instance","auth","enable","authDefault","create","start","forceSamePort","debug","stopped","running","starting","StateError","state","assertion","isNullOrUndefined","_instanceInfo","mongodProcess","Error","stateChange","_startUpInstance","catch","err","message","includes","platform","arch","enabled","console","warn","stop","doCleanup","force","newState","emit","msg","extra","port","getNewPort","newPort","getFreePort","getStartOptions","instOpts","isNew","DryMongoBinary","generateOptions","binary","storageEngine","coercedVersion","coerce","version","SemVer","eq","UnknownVersionError","getStorageEngine","undefined","data","dbName","generateDbName","ip","replSet","dbPath","tmpDir","keyfileLocation","launchTimeout","createTmpDir","files","promises","readdir","length","enableAuth","authObjectEnable","createAuth","mongodOptions","args","spawn","useSamePort","portGeneration","instanceOpts","MongoInstance","extraConnectionOptions","authSource","authMechanism","username","customRootName","password","customRootPwd","cleanupOptions","cleanup","pid","options","assertionIsMMSState","removeDir","res","statPath","isDirectory","instanceInfo","ensureInstance","InstanceInfoError","Promise","rej","once","getUri","otherDb","otherIp","assertionInstanceInfo","uriTemplate","con","MongoClient","connect","db","command","createUser","pwd","mechanisms","customData","createdBy","as","roles","writeConcern","w","extraUsers","sort","a","b","database","close","user","databaseName","authenticationRestrictions","digestPassword","Symbol","asyncDispose","dispose","val","wantedState","currentState"],"sources":["../src/MongoMemoryServer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}