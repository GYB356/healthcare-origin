81f5b6733ce741166e60f20e11310348
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _react = require("@testing-library/react");
var _reactRouterDom = require("react-router-dom");
var _AuthContext = require("../contexts/AuthContext");
var _Login = _interopRequireDefault(require("../components/auth/Login"));
var _jsxRuntime = require("react/jsx-runtime");
var _jsxFileName = "C:\\Users\\olari\\Downloads\\healthcare-main\\healthcare-main\\src\\tests\\auth.test.js"; // Mock fetch globally
import React from "react";
var __jsx = React.createElement;
global.fetch = jest.fn();

// Helper to setup mock responses
const mockFetchResponse = (status, data) => {
  global.fetch.mockImplementationOnce(() => Promise.resolve({
    ok: status === 200,
    status,
    json: () => Promise.resolve(data)
  }));
};
describe('Login Component', () => {
  beforeEach(() => {
    // Clear localStorage and fetch mocks before each test
    localStorage.clear();
    global.fetch.mockClear();
  });

  // Test successful login for different roles
  const roleTests = [{
    role: 'admin',
    expectedRedirect: '/admin/dashboard',
    userData: {
      id: '1',
      email: 'admin@test.com',
      role: 'admin',
      name: 'Admin User'
    }
  }, {
    role: 'provider',
    expectedRedirect: '/provider/dashboard',
    userData: {
      id: '2',
      email: 'provider@test.com',
      role: 'provider',
      name: 'Provider User'
    }
  }, {
    role: 'patient',
    expectedRedirect: '/patient/dashboard',
    userData: {
      id: '3',
      email: 'patient@test.com',
      role: 'patient',
      name: 'Patient User'
    }
  }];
  roleTests.forEach(({
    role,
    expectedRedirect,
    userData
  }) => {
    test(`should login successfully and redirect ${role} to correct dashboard`, async () => {
      const mockNavigate = jest.fn();

      // Mock successful login response
      mockFetchResponse(200, {
        token: 'fake-token',
        refreshToken: 'fake-refresh-token',
        user: userData
      });

      // Mock user data fetch response
      mockFetchResponse(200, {
        user: userData
      });
      (0, _react.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_reactRouterDom.BrowserRouter, {
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_AuthContext.AuthProvider, {
          children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_Login.default, {})
        })
      }));

      // Fill in login form
      _react.fireEvent.change(_react.screen.getByLabelText(/email/i), {
        target: {
          value: userData.email
        }
      });
      _react.fireEvent.change(_react.screen.getByLabelText(/password/i), {
        target: {
          value: 'password123'
        }
      });

      // Submit form
      _react.fireEvent.click(_react.screen.getByRole('button', {
        name: /sign in/i
      }));

      // Verify redirect
      await (0, _react.waitFor)(() => {
        expect(mockNavigate).toHaveBeenCalledWith(expectedRedirect);
      });

      // Verify local storage
      expect(localStorage.getItem('token')).toBe('fake-token');
      expect(localStorage.getItem('refreshToken')).toBe('fake-refresh-token');
      expect(localStorage.getItem('userRole')).toBe(role);
    });
  });

  // Test error scenarios
  const errorTests = [{
    scenario: 'invalid credentials',
    response: {
      status: 401,
      data: {
        message: 'Invalid credentials',
        attemptsRemaining: 4
      }
    },
    expectedError: 'Invalid credentials. 4 attempts remaining.'
  }, {
    scenario: 'account locked',
    response: {
      status: 401,
      data: {
        message: 'Account locked',
        lockUntil: new Date(Date.now() + 15 * 60000).toISOString()
      }
    },
    expectedError: 'Account is locked. Please try again in 15 minutes.'
  }, {
    scenario: '2FA required',
    response: {
      status: 401,
      data: {
        requires2FA: true
      }
    },
    expectedError: 'Please enter your 2FA code'
  }];
  errorTests.forEach(({
    scenario,
    response,
    expectedError
  }) => {
    test(`should handle ${scenario} error correctly`, async () => {
      mockFetchResponse(response.status, response.data);
      (0, _react.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_reactRouterDom.BrowserRouter, {
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_AuthContext.AuthProvider, {
          children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_Login.default, {})
        })
      }));

      // Fill in login form
      _react.fireEvent.change(_react.screen.getByLabelText(/email/i), {
        target: {
          value: 'test@example.com'
        }
      });
      _react.fireEvent.change(_react.screen.getByLabelText(/password/i), {
        target: {
          value: 'password123'
        }
      });

      // Submit form
      _react.fireEvent.click(_react.screen.getByRole('button', {
        name: /sign in/i
      }));

      // Verify error message
      await (0, _react.waitFor)(() => {
        expect(_react.screen.getByText(expectedError)).toBeInTheDocument();
      });
    });
  });

  // Test session persistence
  test('should persist session after page refresh', async () => {
    const userData = {
      id: '1',
      email: 'test@example.com',
      role: 'admin',
      name: 'Test User'
    };

    // Set up initial auth state
    localStorage.setItem('token', 'fake-token');
    localStorage.setItem('refreshToken', 'fake-refresh-token');
    localStorage.setItem('userRole', 'admin');

    // Mock user data fetch response
    mockFetchResponse(200, {
      user: userData
    });
    (0, _react.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_reactRouterDom.BrowserRouter, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_AuthContext.AuthProvider, {
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_Login.default, {})
      })
    }));

    // Verify that the component redirects to dashboard
    await (0, _react.waitFor)(() => {
      expect(mockNavigate).toHaveBeenCalledWith('/admin/dashboard');
    });

    // Verify auth state persists
    expect(localStorage.getItem('token')).toBe('fake-token');
    expect(localStorage.getItem('refreshToken')).toBe('fake-refresh-token');
    expect(localStorage.getItem('userRole')).toBe('admin');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3JlYWN0Um91dGVyRG9tIiwiX0F1dGhDb250ZXh0IiwiX0xvZ2luIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9qc3hSdW50aW1lIiwiX2pzeEZpbGVOYW1lIiwiUmVhY3QiLCJfX2pzeCIsImNyZWF0ZUVsZW1lbnQiLCJnbG9iYWwiLCJmZXRjaCIsImplc3QiLCJmbiIsIm1vY2tGZXRjaFJlc3BvbnNlIiwic3RhdHVzIiwiZGF0YSIsIm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9rIiwianNvbiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwibW9ja0NsZWFyIiwicm9sZVRlc3RzIiwicm9sZSIsImV4cGVjdGVkUmVkaXJlY3QiLCJ1c2VyRGF0YSIsImlkIiwiZW1haWwiLCJuYW1lIiwiZm9yRWFjaCIsInRlc3QiLCJtb2NrTmF2aWdhdGUiLCJ0b2tlbiIsInJlZnJlc2hUb2tlbiIsInVzZXIiLCJyZW5kZXIiLCJqc3giLCJCcm93c2VyUm91dGVyIiwiY2hpbGRyZW4iLCJBdXRoUHJvdmlkZXIiLCJkZWZhdWx0IiwiZmlyZUV2ZW50IiwiY2hhbmdlIiwic2NyZWVuIiwiZ2V0QnlMYWJlbFRleHQiLCJ0YXJnZXQiLCJ2YWx1ZSIsImNsaWNrIiwiZ2V0QnlSb2xlIiwid2FpdEZvciIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiZ2V0SXRlbSIsInRvQmUiLCJlcnJvclRlc3RzIiwic2NlbmFyaW8iLCJyZXNwb25zZSIsIm1lc3NhZ2UiLCJhdHRlbXB0c1JlbWFpbmluZyIsImV4cGVjdGVkRXJyb3IiLCJsb2NrVW50aWwiLCJEYXRlIiwibm93IiwidG9JU09TdHJpbmciLCJyZXF1aXJlczJGQSIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50Iiwic2V0SXRlbSJdLCJzb3VyY2VzIjpbImF1dGgudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBCcm93c2VyUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgeyBBdXRoUHJvdmlkZXIgfSBmcm9tICcuLi9jb250ZXh0cy9BdXRoQ29udGV4dCc7XG5pbXBvcnQgTG9naW4gZnJvbSAnLi4vY29tcG9uZW50cy9hdXRoL0xvZ2luJztcblxuLy8gTW9jayBmZXRjaCBnbG9iYWxseVxuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpO1xuXG4vLyBIZWxwZXIgdG8gc2V0dXAgbW9jayByZXNwb25zZXNcbmNvbnN0IG1vY2tGZXRjaFJlc3BvbnNlID0gKHN0YXR1cywgZGF0YSkgPT4ge1xuICBnbG9iYWwuZmV0Y2gubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PlxuICAgIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICBvazogc3RhdHVzID09PSAyMDAsXG4gICAgICBzdGF0dXMsXG4gICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoZGF0YSlcbiAgICB9KVxuICApO1xufTtcblxuZGVzY3JpYmUoJ0xvZ2luIENvbXBvbmVudCcsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlIGFuZCBmZXRjaCBtb2NrcyBiZWZvcmUgZWFjaCB0ZXN0XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgZ2xvYmFsLmZldGNoLm1vY2tDbGVhcigpO1xuICB9KTtcblxuICAvLyBUZXN0IHN1Y2Nlc3NmdWwgbG9naW4gZm9yIGRpZmZlcmVudCByb2xlc1xuICBjb25zdCByb2xlVGVzdHMgPSBbXG4gICAge1xuICAgICAgcm9sZTogJ2FkbWluJyxcbiAgICAgIGV4cGVjdGVkUmVkaXJlY3Q6ICcvYWRtaW4vZGFzaGJvYXJkJyxcbiAgICAgIHVzZXJEYXRhOiB7XG4gICAgICAgIGlkOiAnMScsXG4gICAgICAgIGVtYWlsOiAnYWRtaW5AdGVzdC5jb20nLFxuICAgICAgICByb2xlOiAnYWRtaW4nLFxuICAgICAgICBuYW1lOiAnQWRtaW4gVXNlcidcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHJvbGU6ICdwcm92aWRlcicsXG4gICAgICBleHBlY3RlZFJlZGlyZWN0OiAnL3Byb3ZpZGVyL2Rhc2hib2FyZCcsXG4gICAgICB1c2VyRGF0YToge1xuICAgICAgICBpZDogJzInLFxuICAgICAgICBlbWFpbDogJ3Byb3ZpZGVyQHRlc3QuY29tJyxcbiAgICAgICAgcm9sZTogJ3Byb3ZpZGVyJyxcbiAgICAgICAgbmFtZTogJ1Byb3ZpZGVyIFVzZXInXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICByb2xlOiAncGF0aWVudCcsXG4gICAgICBleHBlY3RlZFJlZGlyZWN0OiAnL3BhdGllbnQvZGFzaGJvYXJkJyxcbiAgICAgIHVzZXJEYXRhOiB7XG4gICAgICAgIGlkOiAnMycsXG4gICAgICAgIGVtYWlsOiAncGF0aWVudEB0ZXN0LmNvbScsXG4gICAgICAgIHJvbGU6ICdwYXRpZW50JyxcbiAgICAgICAgbmFtZTogJ1BhdGllbnQgVXNlcidcbiAgICAgIH1cbiAgICB9XG4gIF07XG5cbiAgcm9sZVRlc3RzLmZvckVhY2goKHsgcm9sZSwgZXhwZWN0ZWRSZWRpcmVjdCwgdXNlckRhdGEgfSkgPT4ge1xuICAgIHRlc3QoYHNob3VsZCBsb2dpbiBzdWNjZXNzZnVsbHkgYW5kIHJlZGlyZWN0ICR7cm9sZX0gdG8gY29ycmVjdCBkYXNoYm9hcmRgLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrTmF2aWdhdGUgPSBqZXN0LmZuKCk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBsb2dpbiByZXNwb25zZVxuICAgICAgbW9ja0ZldGNoUmVzcG9uc2UoMjAwLCB7XG4gICAgICAgIHRva2VuOiAnZmFrZS10b2tlbicsXG4gICAgICAgIHJlZnJlc2hUb2tlbjogJ2Zha2UtcmVmcmVzaC10b2tlbicsXG4gICAgICAgIHVzZXI6IHVzZXJEYXRhXG4gICAgICB9KTtcblxuICAgICAgLy8gTW9jayB1c2VyIGRhdGEgZmV0Y2ggcmVzcG9uc2VcbiAgICAgIG1vY2tGZXRjaFJlc3BvbnNlKDIwMCwgeyB1c2VyOiB1c2VyRGF0YSB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICA8QXV0aFByb3ZpZGVyPlxuICAgICAgICAgICAgPExvZ2luIC8+XG4gICAgICAgICAgPC9BdXRoUHJvdmlkZXI+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIEZpbGwgaW4gbG9naW4gZm9ybVxuICAgICAgZmlyZUV2ZW50LmNoYW5nZShzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2VtYWlsL2kpLCB7XG4gICAgICAgIHRhcmdldDogeyB2YWx1ZTogdXNlckRhdGEuZW1haWwgfVxuICAgICAgfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcGFzc3dvcmQvaSksIHtcbiAgICAgICAgdGFyZ2V0OiB7IHZhbHVlOiAncGFzc3dvcmQxMjMnIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdWJtaXQgZm9ybVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NpZ24gaW4vaSB9KSk7XG5cbiAgICAgIC8vIFZlcmlmeSByZWRpcmVjdFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrTmF2aWdhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdGVkUmVkaXJlY3QpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFZlcmlmeSBsb2NhbCBzdG9yYWdlXG4gICAgICBleHBlY3QobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpLnRvQmUoJ2Zha2UtdG9rZW4nKTtcbiAgICAgIGV4cGVjdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVmcmVzaFRva2VuJykpLnRvQmUoJ2Zha2UtcmVmcmVzaC10b2tlbicpO1xuICAgICAgZXhwZWN0KGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyUm9sZScpKS50b0JlKHJvbGUpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBUZXN0IGVycm9yIHNjZW5hcmlvc1xuICBjb25zdCBlcnJvclRlc3RzID0gW1xuICAgIHtcbiAgICAgIHNjZW5hcmlvOiAnaW52YWxpZCBjcmVkZW50aWFscycsXG4gICAgICByZXNwb25zZToge1xuICAgICAgICBzdGF0dXM6IDQwMSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyxcbiAgICAgICAgICBhdHRlbXB0c1JlbWFpbmluZzogNFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXhwZWN0ZWRFcnJvcjogJ0ludmFsaWQgY3JlZGVudGlhbHMuIDQgYXR0ZW1wdHMgcmVtYWluaW5nLidcbiAgICB9LFxuICAgIHtcbiAgICAgIHNjZW5hcmlvOiAnYWNjb3VudCBsb2NrZWQnLFxuICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgc3RhdHVzOiA0MDEsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBtZXNzYWdlOiAnQWNjb3VudCBsb2NrZWQnLFxuICAgICAgICAgIGxvY2tVbnRpbDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDE1ICogNjAwMDApLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGV4cGVjdGVkRXJyb3I6ICdBY2NvdW50IGlzIGxvY2tlZC4gUGxlYXNlIHRyeSBhZ2FpbiBpbiAxNSBtaW51dGVzLidcbiAgICB9LFxuICAgIHtcbiAgICAgIHNjZW5hcmlvOiAnMkZBIHJlcXVpcmVkJyxcbiAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIHN0YXR1czogNDAxLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcmVxdWlyZXMyRkE6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGV4cGVjdGVkRXJyb3I6ICdQbGVhc2UgZW50ZXIgeW91ciAyRkEgY29kZSdcbiAgICB9XG4gIF07XG5cbiAgZXJyb3JUZXN0cy5mb3JFYWNoKCh7IHNjZW5hcmlvLCByZXNwb25zZSwgZXhwZWN0ZWRFcnJvciB9KSA9PiB7XG4gICAgdGVzdChgc2hvdWxkIGhhbmRsZSAke3NjZW5hcmlvfSBlcnJvciBjb3JyZWN0bHlgLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRmV0Y2hSZXNwb25zZShyZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLmRhdGEpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgIDxBdXRoUHJvdmlkZXI+XG4gICAgICAgICAgICA8TG9naW4gLz5cbiAgICAgICAgICA8L0F1dGhQcm92aWRlcj5cbiAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgKTtcblxuICAgICAgLy8gRmlsbCBpbiBsb2dpbiBmb3JtXG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZW1haWwvaSksIHtcbiAgICAgICAgdGFyZ2V0OiB7IHZhbHVlOiAndGVzdEBleGFtcGxlLmNvbScgfVxuICAgICAgfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcGFzc3dvcmQvaSksIHtcbiAgICAgICAgdGFyZ2V0OiB7IHZhbHVlOiAncGFzc3dvcmQxMjMnIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBTdWJtaXQgZm9ybVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVJvbGUoJ2J1dHRvbicsIHsgbmFtZTogL3NpZ24gaW4vaSB9KSk7XG5cbiAgICAgIC8vIFZlcmlmeSBlcnJvciBtZXNzYWdlXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoZXhwZWN0ZWRFcnJvcikpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gVGVzdCBzZXNzaW9uIHBlcnNpc3RlbmNlXG4gIHRlc3QoJ3Nob3VsZCBwZXJzaXN0IHNlc3Npb24gYWZ0ZXIgcGFnZSByZWZyZXNoJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJEYXRhID0ge1xuICAgICAgaWQ6ICcxJyxcbiAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICByb2xlOiAnYWRtaW4nLFxuICAgICAgbmFtZTogJ1Rlc3QgVXNlcidcbiAgICB9O1xuXG4gICAgLy8gU2V0IHVwIGluaXRpYWwgYXV0aCBzdGF0ZVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsICdmYWtlLXRva2VuJyk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JlZnJlc2hUb2tlbicsICdmYWtlLXJlZnJlc2gtdG9rZW4nKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclJvbGUnLCAnYWRtaW4nKTtcblxuICAgIC8vIE1vY2sgdXNlciBkYXRhIGZldGNoIHJlc3BvbnNlXG4gICAgbW9ja0ZldGNoUmVzcG9uc2UoMjAwLCB7IHVzZXI6IHVzZXJEYXRhIH0pO1xuXG4gICAgcmVuZGVyKFxuICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgIDxBdXRoUHJvdmlkZXI+XG4gICAgICAgICAgPExvZ2luIC8+XG4gICAgICAgIDwvQXV0aFByb3ZpZGVyPlxuICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICk7XG5cbiAgICAvLyBWZXJpZnkgdGhhdCB0aGUgY29tcG9uZW50IHJlZGlyZWN0cyB0byBkYXNoYm9hcmRcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChtb2NrTmF2aWdhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYWRtaW4vZGFzaGJvYXJkJyk7XG4gICAgfSk7XG5cbiAgICAvLyBWZXJpZnkgYXV0aCBzdGF0ZSBwZXJzaXN0c1xuICAgIGV4cGVjdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkudG9CZSgnZmFrZS10b2tlbicpO1xuICAgIGV4cGVjdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVmcmVzaFRva2VuJykpLnRvQmUoJ2Zha2UtcmVmcmVzaC10b2tlbicpO1xuICAgIGV4cGVjdChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlclJvbGUnKSkudG9CZSgnYWRtaW4nKTtcbiAgfSk7XG59KTsgIl0sIm1hcHBpbmdzIjoiOzs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxlQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxZQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFDLHNCQUFBLENBQUFKLE9BQUE7QUFBNkMsSUFBQUssV0FBQSxHQUFBTCxPQUFBO0FBQUEsSUFBQU0sWUFBQSw4RkFFN0M7QUFBQSxPQUFBQyxLQUFBO0FBQUEsSUFBQUMsS0FBQSxHQUFBRCxLQUFBLENBQUFFLGFBQUE7QUFDQUMsTUFBTSxDQUFDQyxLQUFLLEdBQUdDLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7O0FBRXhCO0FBQ0EsTUFBTUMsaUJBQWlCLEdBQUdBLENBQUNDLE1BQU0sRUFBRUMsSUFBSSxLQUFLO0VBQzFDTixNQUFNLENBQUNDLEtBQUssQ0FBQ00sc0JBQXNCLENBQUMsTUFDbENDLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDO0lBQ2RDLEVBQUUsRUFBRUwsTUFBTSxLQUFLLEdBQUc7SUFDbEJBLE1BQU07SUFDTk0sSUFBSSxFQUFFQSxDQUFBLEtBQU1ILE9BQU8sQ0FBQ0MsT0FBTyxDQUFDSCxJQUFJO0VBQ2xDLENBQUMsQ0FDSCxDQUFDO0FBQ0gsQ0FBQztBQUVETSxRQUFRLENBQUMsaUJBQWlCLEVBQUUsTUFBTTtFQUNoQ0MsVUFBVSxDQUFDLE1BQU07SUFDZjtJQUNBQyxZQUFZLENBQUNDLEtB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