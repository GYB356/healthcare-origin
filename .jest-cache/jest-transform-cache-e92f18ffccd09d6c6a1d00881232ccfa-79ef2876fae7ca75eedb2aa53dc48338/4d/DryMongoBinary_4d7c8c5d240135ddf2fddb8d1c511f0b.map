{"version":3,"names":["debug_1","tslib_1","__importDefault","require","resolveConfig_1","utils_1","path","__importStar","os_1","find_cache_dir_1","getos_1","errors_1","MongoBinaryDownloadUrl_1","log","default","DryMongoBinary","locateBinary","opts","version","useOpts","generateOptions","systemBinary","systemReturn","getSystemPath","isNullOrUndefined","NoSystemBinaryFoundError","binaryCache","has","binary","get","returnValue","generateDownloadPath","undefined","set","defaultVersion","_a","resolveConfig","ResolveConfigVariables","VERSION","DEFAULT_VERSION","ensuredOpts","final","downloadDir","DOWNLOAD_DIR","os","_b","getOS","platform","arch","SYSTEM_BINARY","dirname","ARCHIVE_NAME","DOWNLOAD_URL","input","parseArchiveNameRegex","archiveMatches","exec","assertion","NoRegexMatchError","groups","length","ParseArchiveRegexError","distMatches","dist","release","getBinaryName","binaryName","envToBool","USE_ARCHIVE_NAME_FOR_BINARY_NAME","archiveName","MongoBinaryDownloadUrl","getArchiveName","parse","name","addExe","isLinuxOS","combineBinaryName","basePath","resolve","checkBinaryPermissions","err","Error","message","generatePaths","legacyHomeCache","modulesCache","relative","nodeModulesDLDir","process","env","cwd","includes","sep","tmpModulesCache","homedir","resolveConfigValue","preferGlobal","PREFER_GLOBAL_PATH","paths","pathExists","sysPath","exports","Map"],"sources":["../../src/util/DryMongoBinary.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}