{"version":3,"names":["events_1","require","MongoMemoryServer_1","utils_1","debug_1","tslib_1","__importDefault","mongodb_1","MongoInstance_1","errors_1","fs_1","path_1","semver","__importStar","DryMongoBinary_1","log","default","MongoMemoryReplSetStates","exports","MongoMemoryReplSetEvents","MongoMemoryReplSet","EventEmitter","constructor","opts","servers","_state","stopped","_ranCreateAuth","binaryOpts","_objectSpread","binary","instanceOpts","replSetOpts","replSet","stateChange","newState","args","emit","create","start","state","_instanceOpts","val","assertionIsMMSRSState","_binaryOpts","_replSetOpts","DryMongoBinary","getEnsuredOptions","coercedVersion","coerce","version","SemVer","storageEngine","getStorageEngine","defaults","auth","enable","name","count","dbName","generateDbName","ip","spawn","configSettings","dispose","assertion","ReplsetCountLowError","authDefault","enableAuth","isNullOrUndefined","AuthNotObjectError","getInstanceOpts","baseOpts","keyfileLocation","concat","port","dbPath","replicaMemberConfig","launchTimeout","getUri","otherDb","otherIp","running","init","StateError","hosts","map","s","instanceInfo","Error","join","uriTemplate","undefined","ensureAsync","then","initAllServers","_initReplSet","catch","err","enabled","console","warn","stop","doCleanup","force","length","keyfilepath","resolve","ensureKeyFile","server","InstanceInfoError","instance","extraConnectionOptions","authSource","authMechanism","username","customRootName","password","customRootPwd","Promise","all","keyfilePath","forEach","index","push","_initServer","_keyfiletmp","createTmpDir","statPath","promises","writeFile","keyfileContent","mode","cleanupOptions","process","exitCode","cleanup","successfullyStopped","options","removeDir","waitUntilRunning","res","waitRunning","removeListener","on","uris","isInMemory","extraOptions","con","MongoClient","connect","directConnection","adminDb","db","members","uri","_id","host","getHost","rsConfig","writeConcernMajorityJournalDefault","settings","electionTimeoutMillis","command","replSetInitiate","_waitForPrimary","primary","find","isInstancePrimary","close","createAuth","MongoError","errmsg","config","oldConfig","replSetGetConfig","replSetReconfig","serverOpts","MongoMemoryServer","timeout","where","timeoutId","race","rej","once","MongoInstanceEvents","instancePrimary","_res","setTimeout","v","WaitForPrimaryTimeoutError","clearTimeout","Symbol","asyncDispose","wantedState","currentState"],"sources":["../src/MongoMemoryReplSet.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}