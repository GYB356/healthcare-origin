b38e2107289cf709a522cf2c9dee8f2c
const EventEmitter = require('events');
class WebSocket extends EventEmitter {
  constructor(url, options = {}) {
    super();
    this.url = url;
    this.readyState = WebSocket.CONNECTING;
    this.bufferedAmount = 0;
  }
  static get CONNECTING() {
    return 0;
  }
  static get OPEN() {
    return 1;
  }
  static get CLOSING() {
    return 2;
  }
  static get CLOSED() {
    return 3;
  }
  send(data, callback) {
    this.emit('send', data);
    if (callback) callback();
  }
  close(code, reason) {
    this.readyState = WebSocket.CLOSING;
    this.emit('close', code, reason);
  }

  // Test helpers
  connect() {
    this.readyState = WebSocket.OPEN;
    this.emit('open');
  }
  disconnect() {
    this.readyState = WebSocket.CLOSED;
    this.emit('close');
  }
  simulateMessage(data) {
    this.emit('message', data);
  }
}
module.exports = WebSocket;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJyZXF1aXJlIiwiV2ViU29ja2V0IiwiY29uc3RydWN0b3IiLCJ1cmwiLCJvcHRpb25zIiwicmVhZHlTdGF0ZSIsIkNPTk5FQ1RJTkciLCJidWZmZXJlZEFtb3VudCIsIk9QRU4iLCJDTE9TSU5HIiwiQ0xPU0VEIiwic2VuZCIsImRhdGEiLCJjYWxsYmFjayIsImVtaXQiLCJjbG9zZSIsImNvZGUiLCJyZWFzb24iLCJjb25uZWN0IiwiZGlzY29ubmVjdCIsInNpbXVsYXRlTWVzc2FnZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ3cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKTtcclxuXHJcbmNsYXNzIFdlYlNvY2tldCBleHRlbmRzIEV2ZW50RW1pdHRlciB7XHJcbiAgY29uc3RydWN0b3IodXJsLCBvcHRpb25zID0ge30pIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnVybCA9IHVybDtcclxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DT05ORUNUSU5HO1xyXG4gICAgdGhpcy5idWZmZXJlZEFtb3VudCA9IDA7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IENPTk5FQ1RJTkcoKSB7IHJldHVybiAwOyB9XHJcbiAgc3RhdGljIGdldCBPUEVOKCkgeyByZXR1cm4gMTsgfVxyXG4gIHN0YXRpYyBnZXQgQ0xPU0lORygpIHsgcmV0dXJuIDI7IH1cclxuICBzdGF0aWMgZ2V0IENMT1NFRCgpIHsgcmV0dXJuIDM7IH1cclxuXHJcbiAgc2VuZChkYXRhLCBjYWxsYmFjaykge1xyXG4gICAgdGhpcy5lbWl0KCdzZW5kJywgZGF0YSk7XHJcbiAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZShjb2RlLCByZWFzb24pIHtcclxuICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xyXG4gICAgdGhpcy5lbWl0KCdjbG9zZScsIGNvZGUsIHJlYXNvbik7XHJcbiAgfVxyXG5cclxuICAvLyBUZXN0IGhlbHBlcnNcclxuICBjb25uZWN0KCkge1xyXG4gICAgdGhpcy5yZWFkeVN0YXRlID0gV2ViU29ja2V0Lk9QRU47XHJcbiAgICB0aGlzLmVtaXQoJ29wZW4nKTtcclxuICB9XHJcblxyXG4gIGRpc2Nvbm5lY3QoKSB7XHJcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0VEO1xyXG4gICAgdGhpcy5lbWl0KCdjbG9zZScpO1xyXG4gIH1cclxuXHJcbiAgc2ltdWxhdGVNZXNzYWdlKGRhdGEpIHtcclxuICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIGRhdGEpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXQ7Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxZQUFZLEdBQUdDLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFdEMsTUFBTUMsU0FBUyxTQUFTRixZQUFZLENBQUM7RUFDbkNHLFdBQVdBLENBQUNDLEdBQUcsRUFBRUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxFQUFFO0lBQzdCLEtBQUssQ0FBQyxDQUFDO0lBQ1AsSUFBSSxDQUFDRCxHQUFHLEdBQUdBLEdBQUc7SUFDZCxJQUFJLENBQUNFLFVBQVUsR0FBR0osU0FBUyxDQUFDSyxVQUFVO0lBQ3RDLElBQUksQ0FBQ0MsY0FBYyxHQUFHLENBQUM7RUFDekI7RUFFQSxXQUFXRCxVQUFVQSxDQUFBLEVBQUc7SUFBRSxPQUFPLENBQUM7RUFBRTtFQUNwQyxXQUFXRSxJQUFJQSxDQUFBLEVBQUc7SUFBRSxPQUFPLENBQUM7RUFBRTtFQUM5QixXQUFXQyxPQUFPQSxDQUFBLEVBQUc7SUFBRSxPQUFPLENBQUM7RUFBRTtFQUNqQyxXQUFXQyxNQUFNQSxDQUFBLEVBQUc7SUFBRSxPQUFPLENBQUM7RUFBRTtFQUVoQ0MsSUFBSUEsQ0FBQ0MsSUFBSSxFQUFFQyxRQUFRLEVBQUU7SUFDbkIsSUFBSSxDQUFDQyxJQUFJLENBQUMsTUFBTSxFQUFFRixJQUFJLENBQUM7SUFDdkIsSUFBSUMsUUFBUSxFQUFFQSxRQUFRLENBQUMsQ0FBQztFQUMxQjtFQUVBRSxLQUFLQSxDQUFDQyxJQUFJLEVBQUVDLE1BQU0sRUFBRTtJQUNsQixJQUFJLENBQUNaLFVBQVUsR0FBR0osU0FBUyxDQUFDUSxPQUFPO0lBQ25DLElBQUksQ0FBQ0ssSUFBSSxDQUFDLE9BQU8sRUFBRUUsSUFBSSxFQUFFQyxNQUFNLENBQUM7RUFDbEM7O0VBRUE7RUFDQUMsT0FBT0EsQ0FBQSxFQUFHO0lBQ1IsSUFBSSxDQUFDYixVQUFVLEdBQUdKLFNBQVMsQ0FBQ08sSUFBSTtJQUNoQyxJQUFJLENBQUNNLElBQUksQ0FBQyxNQUFNLENBQUM7RUFDbkI7RUFFQUssVUFBVUEsQ0FBQSxFQUFHO0lBQ1gsSUFBSSxDQUFDZCxVQUFVLEdBQUdKLFNBQVMsQ0FBQ1MsTUFBTTtJQUNsQyxJQUFJLENBQUNJLElBQUksQ0FBQyxPQUFPLENBQUM7RUFDcEI7RUFFQU0sZUFBZUEsQ0FBQ1IsSUFBSSxFQUFFO0lBQ3BCLElBQUksQ0FBQ0UsSUFBSSxDQUFDLFNBQVMsRUFBRUYsSUFBSSxDQUFDO0VBQzVCO0FBQ0Y7QUFFQVMsTUFBTSxDQUFDQyxPQUFPLEdBQUdyQixTQUFTIiwiaWdub3JlTGlzdCI6W119