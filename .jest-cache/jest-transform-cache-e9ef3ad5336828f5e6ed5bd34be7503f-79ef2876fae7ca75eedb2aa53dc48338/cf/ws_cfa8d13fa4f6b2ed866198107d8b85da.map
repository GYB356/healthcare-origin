{"version":3,"names":["EventEmitter","require","WebSocket","constructor","url","options","readyState","CONNECTING","bufferedAmount","OPEN","CLOSING","CLOSED","send","data","callback","emit","close","code","reason","connect","disconnect","simulateMessage","module","exports"],"sources":["ws.js"],"sourcesContent":["const EventEmitter = require('events');\r\n\r\nclass WebSocket extends EventEmitter {\r\n  constructor(url, options = {}) {\r\n    super();\r\n    this.url = url;\r\n    this.readyState = WebSocket.CONNECTING;\r\n    this.bufferedAmount = 0;\r\n  }\r\n\r\n  static get CONNECTING() { return 0; }\r\n  static get OPEN() { return 1; }\r\n  static get CLOSING() { return 2; }\r\n  static get CLOSED() { return 3; }\r\n\r\n  send(data, callback) {\r\n    this.emit('send', data);\r\n    if (callback) callback();\r\n  }\r\n\r\n  close(code, reason) {\r\n    this.readyState = WebSocket.CLOSING;\r\n    this.emit('close', code, reason);\r\n  }\r\n\r\n  // Test helpers\r\n  connect() {\r\n    this.readyState = WebSocket.OPEN;\r\n    this.emit('open');\r\n  }\r\n\r\n  disconnect() {\r\n    this.readyState = WebSocket.CLOSED;\r\n    this.emit('close');\r\n  }\r\n\r\n  simulateMessage(data) {\r\n    this.emit('message', data);\r\n  }\r\n}\r\n\r\nmodule.exports = WebSocket;"],"mappings":"AAAA,MAAMA,YAAY,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAEtC,MAAMC,SAAS,SAASF,YAAY,CAAC;EACnCG,WAAWA,CAACC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;IAC7B,KAAK,CAAC,CAAC;IACP,IAAI,CAACD,GAAG,GAAGA,GAAG;IACd,IAAI,CAACE,UAAU,GAAGJ,SAAS,CAACK,UAAU;IACtC,IAAI,CAACC,cAAc,GAAG,CAAC;EACzB;EAEA,WAAWD,UAAUA,CAAA,EAAG;IAAE,OAAO,CAAC;EAAE;EACpC,WAAWE,IAAIA,CAAA,EAAG;IAAE,OAAO,CAAC;EAAE;EAC9B,WAAWC,OAAOA,CAAA,EAAG;IAAE,OAAO,CAAC;EAAE;EACjC,WAAWC,MAAMA,CAAA,EAAG;IAAE,OAAO,CAAC;EAAE;EAEhCC,IAAIA,CAACC,IAAI,EAAEC,QAAQ,EAAE;IACnB,IAAI,CAACC,IAAI,CAAC,MAAM,EAAEF,IAAI,CAAC;IACvB,IAAIC,QAAQ,EAAEA,QAAQ,CAAC,CAAC;EAC1B;EAEAE,KAAKA,CAACC,IAAI,EAAEC,MAAM,EAAE;IAClB,IAAI,CAACZ,UAAU,GAAGJ,SAAS,CAACQ,OAAO;IACnC,IAAI,CAACK,IAAI,CAAC,OAAO,EAAEE,IAAI,EAAEC,MAAM,CAAC;EAClC;;EAEA;EACAC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACb,UAAU,GAAGJ,SAAS,CAACO,IAAI;IAChC,IAAI,CAACM,IAAI,CAAC,MAAM,CAAC;EACnB;EAEAK,UAAUA,CAAA,EAAG;IACX,IAAI,CAACd,UAAU,GAAGJ,SAAS,CAACS,MAAM;IAClC,IAAI,CAACI,IAAI,CAAC,OAAO,CAAC;EACpB;EAEAM,eAAeA,CAACR,IAAI,EAAE;IACpB,IAAI,CAACE,IAAI,CAAC,SAAS,EAAEF,IAAI,CAAC;EAC5B;AACF;AAEAS,MAAM,CAACC,OAAO,GAAGrB,SAAS","ignoreList":[]}