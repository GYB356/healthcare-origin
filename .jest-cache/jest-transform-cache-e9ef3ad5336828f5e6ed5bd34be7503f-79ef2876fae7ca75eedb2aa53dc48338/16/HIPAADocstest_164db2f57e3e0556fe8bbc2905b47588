1218ad0655c4c6880147544dacfbc3b0
"use strict";

// Mock the modules
_getJestObj().mock('axios');
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
var _reactRouterDom = require("react-router-dom");
var _AuthContext = require("../../context/AuthContext");
var _HIPAADocs = _interopRequireDefault(require("../../pages/HIPAADocs"));
var _axios = _interopRequireDefault(require("axios"));
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
describe('HIPAADocs Component', () => {
  const mockDocuments = [{
    id: 'doc-1',
    title: 'Privacy Policy',
    version: '1.0',
    content: 'Privacy policy content...'
  }, {
    id: 'doc-2',
    title: 'Patient Rights',
    version: '1.1',
    content: 'Patient rights content...'
  }];
  const mockAcknowledgments = [{
    id: 'ack-1',
    documentId: 'doc-1',
    userId: 'user-1',
    acknowledgedAt: '2024-03-01T12:00:00Z'
  }];
  const renderComponent = (role = 'admin') => {
    const mockUser = {
      id: 'user-1',
      role: role
    };
    return (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_reactRouterDom.MemoryRouter, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_AuthContext.AuthProvider, {
        value: {
          user: mockUser
        },
        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_HIPAADocs.default, {})
      })
    }));
  };
  beforeEach(() => {
    jest.clearAllMocks();
    _axios.default.get.mockResolvedValueOnce({
      data: mockDocuments
    }).mockResolvedValueOnce({
      data: mockAcknowledgments
    });
  });
  it('loads and displays HIPAA documents', async () => {
    renderComponent();
    await (0, _react2.waitFor)(() => {
      expect(_axios.default.get).toHaveBeenCalledWith('/api/hipaa/documents');
    });
    expect(_react2.screen.getByText('Privacy Policy')).toBeInTheDocument();
    expect(_react2.screen.getByText('Patient Rights')).toBeInTheDocument();
    expect(_react2.screen.getByText('Version 1.0')).toBeInTheDocument();
    expect(_react2.screen.getByText('Version 1.1')).toBeInTheDocument();
  });
  it('shows acknowledgment status', async () => {
    renderComponent();
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Acknowledged')).toBeInTheDocument();
    });
  });
  it('allows viewing document content', async () => {
    renderComponent();
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getAllByText('View Document')).toHaveLength(2);
    });
    _react2.fireEvent.click(_react2.screen.getAllByText('View Document')[0]);
    expect(_react2.screen.getByText('Privacy policy content...')).toBeInTheDocument();
  });
  it('allows acknowledging documents', async () => {
    _axios.default.post.mockResolvedValueOnce({
      data: {
        id: 'ack-2',
        documentId: 'doc-2',
        userId: 'user-1',
        acknowledgedAt: '2024-03-01T13:00:00Z'
      }
    });
    renderComponent();
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getAllByText('View Document')).toHaveLength(2);
    });

    // Open the second document (unacknowledged)
    _react2.fireEvent.click(_react2.screen.getAllByText('View Document')[1]);

    // Click acknowledge button
    _react2.fireEvent.click(_react2.screen.getByText('Acknowledge'));
    await (0, _react2.waitFor)(() => {
      expect(_axios.default.post).toHaveBeenCalledWith('/api/hipaa/acknowledgments', {
        documentId: 'doc-2',
        userId: 'user-1'
      });
    });
  });
  it('handles error states', async () => {
    _axios.default.get.mockRejectedValueOnce(new Error('Failed to load documents'));
    renderComponent();
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Failed to load HIPAA documents')).toBeInTheDocument();
    });
  });
  it('displays loading state', () => {
    renderComponent();
    expect(_react2.screen.getByText('Loading HIPAA documents...')).toBeInTheDocument();
  });
  it('closes document modal', async () => {
    renderComponent();
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getAllByText('View Document')).toHaveLength(2);
    });
    _react2.fireEvent.click(_react2.screen.getAllByText('View Document')[0]);
    expect(_react2.screen.getByText('Privacy policy content...')).toBeInTheDocument();
    _react2.fireEvent.click(_react2.screen.getByText('Close'));
    expect(_react2.screen.queryByText('Privacy policy content...')).not.toBeInTheDocument();
  });
  it('handles acknowledgment errors', async () => {
    _axios.default.post.mockRejectedValueOnce(new Error('Failed to acknowledge document'));
    renderComponent();
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getAllByText('View Document')).toHaveLength(2);
    });
    _react2.fireEvent.click(_react2.screen.getAllByText('View Document')[1]);
    _react2.fireEvent.click(_react2.screen.getByText('Acknowledge'));
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText('Failed to acknowledge document')).toBeInTheDocument();
    });
  });
  it('refreshes acknowledgments after successful acknowledgment', async () => {
    const newAcknowledgment = {
      id: 'ack-2',
      documentId: 'doc-2',
      userId: 'user-1',
      acknowledgedAt: '2024-03-01T13:00:00Z'
    };
    _axios.default.post.mockResolvedValueOnce({
      data: newAcknowledgment
    });
    _axios.default.get.mockResolvedValueOnce({
      data: mockDocuments
    }).mockResolvedValueOnce({
      data: mockAcknowledgments
    }).mockResolvedValueOnce({
      data: [...mockAcknowledgments, newAcknowledgment]
    });
    renderComponent();
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getAllByText('View Document')).toHaveLength(2);
    });
    _react2.fireEvent.click(_react2.screen.getAllByText('View Document')[1]);
    _react2.fireEvent.click(_react2.screen.getByText('Acknowledge'));
    await (0, _react2.waitFor)(() => {
      expect(_axios.default.get).toHaveBeenCalledWith('/api/hipaa/acknowledgments?userId=user-1');
      expect(_react2.screen.getAllByText('Acknowledged')).toHaveLength(2);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfcmVhY3RSb3V0ZXJEb20iLCJfQXV0aENvbnRleHQiLCJfSElQQUFEb2NzIiwiX2F4aW9zIiwiX2pzeFJ1bnRpbWUiLCJqZXN0IiwiZGVzY3JpYmUiLCJtb2NrRG9jdW1lbnRzIiwiaWQiLCJ0aXRsZSIsInZlcnNpb24iLCJjb250ZW50IiwibW9ja0Fja25vd2xlZGdtZW50cyIsImRvY3VtZW50SWQiLCJ1c2VySWQiLCJhY2tub3dsZWRnZWRBdCIsInJlbmRlckNvbXBvbmVudCIsInJvbGUiLCJtb2NrVXNlciIsInJlbmRlciIsImpzeCIsIk1lbW9yeVJvdXRlciIsImNoaWxkcmVuIiwiQXV0aFByb3ZpZGVyIiwidmFsdWUiLCJ1c2VyIiwiZGVmYXVsdCIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiYXhpb3MiLCJnZXQiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJkYXRhIiwiaXQiLCJ3YWl0Rm9yIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJzY3JlZW4iLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImdldEFsbEJ5VGV4dCIsInRvSGF2ZUxlbmd0aCIsImZpcmVFdmVudCIsImNsaWNrIiwicG9zdCIsIm1vY2tSZWplY3RlZFZhbHVlT25jZSIsIkVycm9yIiwicXVlcnlCeVRleHQiLCJub3QiLCJuZXdBY2tub3dsZWRnbWVudCJdLCJzb3VyY2VzIjpbIkhJUEFBRG9jcy50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yIH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyBNZW1vcnlSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCB7IEF1dGhQcm92aWRlciB9IGZyb20gJy4uLy4uL2NvbnRleHQvQXV0aENvbnRleHQnO1xuaW1wb3J0IEhJUEFBRG9jcyBmcm9tICcuLi8uLi9wYWdlcy9ISVBBQURvY3MnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuLy8gTW9jayB0aGUgbW9kdWxlc1xuamVzdC5tb2NrKCdheGlvcycpO1xuXG5kZXNjcmliZSgnSElQQUFEb2NzIENvbXBvbmVudCcsICgpID0+IHtcbiAgY29uc3QgbW9ja0RvY3VtZW50cyA9IFtcbiAgICB7XG4gICAgICBpZDogJ2RvYy0xJyxcbiAgICAgIHRpdGxlOiAnUHJpdmFjeSBQb2xpY3knLFxuICAgICAgdmVyc2lvbjogJzEuMCcsXG4gICAgICBjb250ZW50OiAnUHJpdmFjeSBwb2xpY3kgY29udGVudC4uLidcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnZG9jLTInLFxuICAgICAgdGl0bGU6ICdQYXRpZW50IFJpZ2h0cycsXG4gICAgICB2ZXJzaW9uOiAnMS4xJyxcbiAgICAgIGNvbnRlbnQ6ICdQYXRpZW50IHJpZ2h0cyBjb250ZW50Li4uJ1xuICAgIH1cbiAgXTtcblxuICBjb25zdCBtb2NrQWNrbm93bGVkZ21lbnRzID0gW1xuICAgIHtcbiAgICAgIGlkOiAnYWNrLTEnLFxuICAgICAgZG9jdW1lbnRJZDogJ2RvYy0xJyxcbiAgICAgIHVzZXJJZDogJ3VzZXItMScsXG4gICAgICBhY2tub3dsZWRnZWRBdDogJzIwMjQtMDMtMDFUMTI6MDA6MDBaJ1xuICAgIH1cbiAgXTtcblxuICBjb25zdCByZW5kZXJDb21wb25lbnQgPSAocm9sZSA9ICdhZG1pbicpID0+IHtcbiAgICBjb25zdCBtb2NrVXNlciA9IHtcbiAgICAgIGlkOiAndXNlci0xJyxcbiAgICAgIHJvbGU6IHJvbGVcbiAgICB9O1xuXG4gICAgcmV0dXJuIHJlbmRlcihcbiAgICAgIDxNZW1vcnlSb3V0ZXI+XG4gICAgICAgIDxBdXRoUHJvdmlkZXIgdmFsdWU9e3sgdXNlcjogbW9ja1VzZXIgfX0+XG4gICAgICAgICAgPEhJUEFBRG9jcyAvPlxuICAgICAgICA8L0F1dGhQcm92aWRlcj5cbiAgICAgIDwvTWVtb3J5Um91dGVyPlxuICAgICk7XG4gIH07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgYXhpb3MuZ2V0XG4gICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZGF0YTogbW9ja0RvY3VtZW50cyB9KVxuICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRhdGE6IG1vY2tBY2tub3dsZWRnbWVudHMgfSk7XG4gIH0pO1xuXG4gIGl0KCdsb2FkcyBhbmQgZGlzcGxheXMgSElQQUEgZG9jdW1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckNvbXBvbmVudCgpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QoYXhpb3MuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9oaXBhYS9kb2N1bWVudHMnKTtcbiAgICB9KTtcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQcml2YWN5IFBvbGljeScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQYXRpZW50IFJpZ2h0cycpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdWZXJzaW9uIDEuMCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdWZXJzaW9uIDEuMScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnc2hvd3MgYWNrbm93bGVkZ21lbnQgc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckNvbXBvbmVudCgpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQWNrbm93bGVkZ2VkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdhbGxvd3Mgdmlld2luZyBkb2N1bWVudCBjb250ZW50JywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckNvbXBvbmVudCgpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnVmlldyBEb2N1bWVudCcpKS50b0hhdmVMZW5ndGgoMik7XG4gICAgfSk7XG5cbiAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEFsbEJ5VGV4dCgnVmlldyBEb2N1bWVudCcpWzBdKTtcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQcml2YWN5IHBvbGljeSBjb250ZW50Li4uJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdhbGxvd3MgYWNrbm93bGVkZ2luZyBkb2N1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgYXhpb3MucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkYXRhOiB7XG4gICAgICBpZDogJ2Fjay0yJyxcbiAgICAgIGRvY3VtZW50SWQ6ICdkb2MtMicsXG4gICAgICB1c2VySWQ6ICd1c2VyLTEnLFxuICAgICAgYWNrbm93bGVkZ2VkQXQ6ICcyMDI0LTAzLTAxVDEzOjAwOjAwWidcbiAgICB9fSk7XG5cbiAgICByZW5kZXJDb21wb25lbnQoKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ1ZpZXcgRG9jdW1lbnQnKSkudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuXG4gICAgLy8gT3BlbiB0aGUgc2Vjb25kIGRvY3VtZW50ICh1bmFja25vd2xlZGdlZClcbiAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEFsbEJ5VGV4dCgnVmlldyBEb2N1bWVudCcpWzFdKTtcblxuICAgIC8vIENsaWNrIGFja25vd2xlZGdlIGJ1dHRvblxuICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KCdBY2tub3dsZWRnZScpKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KGF4aW9zLnBvc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL2hpcGFhL2Fja25vd2xlZGdtZW50cycsIHtcbiAgICAgICAgZG9jdW1lbnRJZDogJ2RvYy0yJyxcbiAgICAgICAgdXNlcklkOiAndXNlci0xJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdoYW5kbGVzIGVycm9yIHN0YXRlcycsIGFzeW5jICgpID0+IHtcbiAgICBheGlvcy5nZXQubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgZG9jdW1lbnRzJykpO1xuICAgIHJlbmRlckNvbXBvbmVudCgpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRmFpbGVkIHRvIGxvYWQgSElQQUEgZG9jdW1lbnRzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdkaXNwbGF5cyBsb2FkaW5nIHN0YXRlJywgKCkgPT4ge1xuICAgIHJlbmRlckNvbXBvbmVudCgpO1xuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdMb2FkaW5nIEhJUEFBIGRvY3VtZW50cy4uLicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICBpdCgnY2xvc2VzIGRvY3VtZW50IG1vZGFsJywgYXN5bmMgKCkgPT4ge1xuICAgIHJlbmRlckNvbXBvbmVudCgpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEFsbEJ5VGV4dCgnVmlldyBEb2N1bWVudCcpKS50b0hhdmVMZW5ndGgoMik7XG4gICAgfSk7XG5cbiAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEFsbEJ5VGV4dCgnVmlldyBEb2N1bWVudCcpWzBdKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnUHJpdmFjeSBwb2xpY3kgY29udGVudC4uLicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0Nsb3NlJykpO1xuICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ1ByaXZhY3kgcG9saWN5IGNvbnRlbnQuLi4nKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIGl0KCdoYW5kbGVzIGFja25vd2xlZGdtZW50IGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICBheGlvcy5wb3N0Lm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ0ZhaWxlZCB0byBhY2tub3dsZWRnZSBkb2N1bWVudCcpKTtcbiAgICByZW5kZXJDb21wb25lbnQoKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ1ZpZXcgRG9jdW1lbnQnKSkudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuXG4gICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRBbGxCeVRleHQoJ1ZpZXcgRG9jdW1lbnQnKVsxXSk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0Fja25vd2xlZGdlJykpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRmFpbGVkIHRvIGFja25vd2xlZGdlIGRvY3VtZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdyZWZyZXNoZXMgYWNrbm93bGVkZ21lbnRzIGFmdGVyIHN1Y2Nlc3NmdWwgYWNrbm93bGVkZ21lbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbmV3QWNrbm93bGVkZ21lbnQgPSB7XG4gICAgICBpZDogJ2Fjay0yJyxcbiAgICAgIGRvY3VtZW50SWQ6ICdkb2MtMicsXG4gICAgICB1c2VySWQ6ICd1c2VyLTEnLFxuICAgICAgYWNrbm93bGVkZ2VkQXQ6ICcyMDI0LTAzLTAxVDEzOjAwOjAwWidcbiAgICB9O1xuXG4gICAgYXhpb3MucG9zdC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkYXRhOiBuZXdBY2tub3dsZWRnbWVudCB9KTtcbiAgICBheGlvcy5nZXRcbiAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyBkYXRhOiBtb2NrRG9jdW1lbnRzIH0pXG4gICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgZGF0YTogbW9ja0Fja25vd2xlZGdtZW50cyB9KVxuICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IGRhdGE6IFsuLi5tb2NrQWNrbm93bGVkZ21lbnRzLCBuZXdBY2tub3dsZWRnbWVudF0gfSk7XG5cbiAgICByZW5kZXJDb21wb25lbnQoKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ1ZpZXcgRG9jdW1lbnQnKSkudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuXG4gICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRBbGxCeVRleHQoJ1ZpZXcgRG9jdW1lbnQnKVsxXSk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoJ0Fja25vd2xlZGdlJykpO1xuXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QoYXhpb3MuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9oaXBhYS9hY2tub3dsZWRnbWVudHM/dXNlcklkPXVzZXItMScpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRBbGxCeVRleHQoJ0Fja25vd2xlZGdlZCcpKS50b0hhdmVMZW5ndGgoMik7XG4gICAgfSk7XG4gIH0pO1xufSk7ICJdLCJtYXBwaW5ncyI6Ijs7QUFPQTtBQUNBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxPQUFPLENBQUM7QUFBQyxJQUFBQyxzQkFBQSxHQUFBQyxPQUFBO0FBUm5CLElBQUFDLE1BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLGVBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFlBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLFVBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFNLE1BQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUEwQixJQUFBTyxXQUFBLEdBQUFQLE9BQUE7QUFBQSxTQUFBSCxZQUFBO0VBQUE7SUFBQVc7RUFBQSxJQUFBUixPQUFBO0VBQUFILFdBQUEsR0FBQUEsQ0FBQSxLQUFBVyxJQUFBO0VBQUEsT0FBQUEsSUFBQTtBQUFBO0FBSzFCQyxRQUFRLENBQUMscUJBQXFCLEVBQUUsTUFBTTtFQUNwQyxNQUFNQyxhQUFhLEdBQUcsQ0FDcEI7SUFDRUMsRUFBRSxFQUFFLE9BQU87SUFDWEMsS0FBSyxFQUFFLGdCQUFnQjtJQUN2QkMsT0FBTyxFQUFFLEtBQUs7SUFDZEMsT0FBTyxFQUFFO0VBQ1gsQ0FBQyxFQUNEO0lBQ0VILEVBQUUsRUFBRSxPQUFPO0lBQ1hDLEtBQUssRUFBRSxnQkFBZ0I7SUFDdkJDLE9BQU8sRUFBRSxLQUFLO0lBQ2RDLE9BQU8sRUFBRTtFQUNYLENBQUMsQ0FDRjtFQUVELE1BQU1DLG1CQUFtQixHQUFHLENBQzFCO0lBQ0VKLEVBQUUsRUFBRSxPQUFPO0lBQ1hLLFVBQVUsRUFBRSxPQUFPO0lBQ25CQyxNQUFNLEVBQUUsUUFBUTtJQUNoQkMsY0FBYyxFQUFFO0VBQ2xCLENBQUMsQ0FDRjtFQUVELE1BQU1DLGVBQWUsR0FBR0EsQ0FBQ0MsSUFBSSxHQUFHLE9BQU8sS0FBSztJQUMxQyxNQUFNQyxRQUFRLEdBQUc7TUFDZlYsRUFBRSxFQUFFLFFBQVE7TUFDWlMsSUFBSSxFQUFFQTtJQUNSLENBQUM7SUFFRCxPQUFPLElBQUFFLGNBQU0sZUFDWCxJQUFBZixXQUFBLENBQUFnQixHQUFBLEVBQUNwQixlQUFBLENBQUFxQixZQUFZO01BQUFDLFFBQUEsZUFDWCxJQUFBbEIsV0FBQSxDQUFBZ0IsR0FBQSxFQUFDbkIsWUFBQSxDQUFBc0IsWUFBWTtRQUFDQyxLQUFLLEVBQUU7VUFBRUMsSUFBSSxFQUFFUDtRQUFTLENBQUU7UUFBQUksUUFBQSxlQUN0QyxJQUFBbEIsV0FBQSxDQUFBZ0IsR0FBQSxFQUFDbEIsVUFBQSxDQUFBd0IsT0FBUyxJQUFFO01BQUMsQ0FDRDtJQUFDLENBQ0gsQ0FDaEIsQ0FBQztFQUNILENBQUM7RUFFREMsVUFBVSxDQUFDLE1BQU07SUFDZnRCLElBQUksQ0FBQ3VCLGFBQWEsQ0FBQyxDQUFDO0lBQ3BCQyxjQUFLLENBQUNDLEdBQUcsQ0FDTkMscUJBQXFCLENBQUM7TUFBRUMsSUFBSSxFQUFFekI7SUFBYyxDQUFDLENBQUMsQ0FDOUN3QixxQkFBcUIsQ0FBQztNQUFFQyxJQUFJLEVBQUVwQjtJQUFvQixDQUFDLENBQUM7RUFDekQsQ0FBQyxDQUFDO0VBRUZxQixFQUFFLENBQUMsb0NBQW9DLEVBQUUsWUFBWTtJQUNuRGpCLGVBQWUsQ0FBQyxDQUFDO0lBRWpCLE1BQU0sSUFBQWtCLGVBQU8sRUFBQyxNQUFNO01BQ2xCQyxNQUFNLENBQUNOLGNBQUssQ0FBQ0MsR0FBRyxDQUFDLENBQUNNLG9CQUFvQixDQUFDLHNCQUFzQixDQUFDO0lBQ2hFLENBQUMsQ0FBQztJQUVGRCxNQUFNLENBQUNFLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztJQUM5REosTUFBTSxDQUFDRSxjQUFNLENBQUNDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLENBQUM7SUFDOURKLE1BQU0sQ0FBQ0UsY0FBTSxDQUFDQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztJQUMzREosTUFBTSxDQUFDRSxjQUFNLENBQUNDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDO0VBQzdELENBQUMsQ0FBQztFQUVGTixFQUFFLENBQUMsNkJBQTZCLEVBQUUsWUFBWTtJQUM1Q2pCLGVBQWUsQ0FBQyxDQUFDO0lBRWpCLE1BQU0sSUFBQWtCLGVBQU8sRUFBQyxNQUFNO01BQ2xCQyxNQUFNLENBQUNFLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLENBQUM7SUFDOUQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZOLEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxZQUFZO0lBQ2hEakIsZUFBZSxDQUFDLENBQUM7SUFFakIsTUFBTSxJQUFBa0IsZUFBTyxFQUFDLE1BQU07TUFDbEJDLE1BQU0sQ0FBQ0UsY0FBTSxDQUFDRyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQ0MsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUM7SUFFRkMsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDTixjQUFNLENBQUNHLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV4REwsTUFBTSxDQUFDRSxjQUFNLENBQUNDLFNBQVMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLENBQUM7RUFDM0UsQ0FBQyxDQUFDO0VBRUZOLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxZQUFZO0lBQy9DSixjQUFLLENBQUNlLElBQUksQ0FBQ2IscUJBQXFCLENBQUM7TUFBRUMsSUFBSSxFQUFFO1FBQ3ZDeEIsRUFBRSxFQUFFLE9BQU87UUFDWEssVUFBVSxFQUFFLE9BQU87UUFDbkJDLE1BQU0sRUFBRSxRQUFRO1FBQ2hCQyxjQUFjLEVBQUU7TUFDbEI7SUFBQyxDQUFDLENBQUM7SUFFSEMsZUFBZSxDQUFDLENBQUM7SUFFakIsTUFBTSxJQUFBa0IsZUFBTyxFQUFDLE1BQU07TUFDbEJDLE1BQU0sQ0FBQ0UsY0FBTSxDQUFDRyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQ0MsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUM7O0lBRUY7SUFDQUMsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDTixjQUFNLENBQUNHLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7SUFFeEQ7SUFDQUUsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDTixjQUFNLENBQUNDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUVoRCxNQUFNLElBQUFKLGVBQU8sRUFBQyxNQUFNO01BQ2xCQyxNQUFNLENBQUNOLGNBQUssQ0FBQ2UsSUFBSSxDQUFDLENBQUNSLG9CQUFvQixDQUFDLDRCQUE0QixFQUFFO1FBQ3BFdkIsVUFBVSxFQUFFLE9BQU87UUFDbkJDLE1BQU0sRUFBRTtNQUNWLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGbUIsRUFBRSxDQUFDLHNCQUFzQixFQUFFLFlBQVk7SUFDckNKLGNBQUssQ0FBQ0MsR0FBRyxDQUFDZSxxQkFBcUIsQ0FBQyxJQUFJQyxLQUFLLENBQUMsMEJBQTBCLENBQUMsQ0FBQztJQUN0RTlCLGVBQWUsQ0FBQyxDQUFDO0lBRWpCLE1BQU0sSUFBQWtCLGVBQU8sRUFBQyxNQUFNO01BQ2xCQyxNQUFNLENBQUNFLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLGdDQUFnQyxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztJQUNoRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRk4sRUFBRSxDQUFDLHdCQUF3QixFQUFFLE1BQU07SUFDakNqQixlQUFlLENBQUMsQ0FBQztJQUNqQm1CLE1BQU0sQ0FBQ0UsY0FBTSxDQUFDQyxTQUFTLENBQUMsNEJBQTRCLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDO0VBQzVFLENBQUMsQ0FBQztFQUVGTixFQUFFLENBQUMsdUJBQXVCLEVBQUUsWUFBWTtJQUN0Q2pCLGVBQWUsQ0FBQyxDQUFDO0lBRWpCLE1BQU0sSUFBQWtCLGVBQU8sRUFBQyxNQUFNO01BQ2xCQyxNQUFNLENBQUNFLGNBQU0sQ0FBQ0csWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUNDLFlBQVksQ0FBQyxDQUFDLENBQUM7SUFDOUQsQ0FBQyxDQUFDO0lBRUZDLGlCQUFTLENBQUNDLEtBQUssQ0FBQ04sY0FBTSxDQUFDRyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDeERMLE1BQU0sQ0FBQ0UsY0FBTSxDQUFDQyxTQUFTLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDO0lBRXpFRyxpQkFBUyxDQUFDQyxLQUFLLENBQUNOLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzFDSCxNQUFNLENBQUNFLGNBQU0sQ0FBQ1UsV0FBVyxDQUFDLDJCQUEyQixDQUFDLENBQUMsQ0FBQ0MsR0FBRyxDQUFDVCxpQkFBaUIsQ0FBQyxDQUFDO0VBQ2pGLENBQUMsQ0FBQztFQUVGTixFQUFFLENBQUMsK0JBQStCLEVBQUUsWUFBWTtJQUM5Q0osY0FBSyxDQUFDZSxJQUFJLENBQUNDLHFCQUFxQixDQUFDLElBQUlDLEtBQUssQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0lBQzdFOUIsZUFBZSxDQUFDLENBQUM7SUFFakIsTUFBTSxJQUFBa0IsZUFBTyxFQUFDLE1BQU07TUFDbEJDLE1BQU0sQ0FBQ0UsY0FBTSxDQUFDRyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQ0MsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUM7SUFFRkMsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDTixjQUFNLENBQUNHLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4REUsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDTixjQUFNLENBQUNDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUVoRCxNQUFNLElBQUFKLGVBQU8sRUFBQyxNQUFNO01BQ2xCQyxNQUFNLENBQUNFLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLGdDQUFnQyxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztJQUNoRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRk4sRUFBRSxDQUFDLDJEQUEyRCxFQUFFLFlBQVk7SUFDMUUsTUFBTWdCLGlCQUFpQixHQUFHO01BQ3hCekMsRUFBRSxFQUFFLE9BQU87TUFDWEssVUFBVSxFQUFFLE9BQU87TUFDbkJDLE1BQU0sRUFBRSxRQUFRO01BQ2hCQyxjQUFjLEVBQUU7SUFDbEIsQ0FBQztJQUVEYyxjQUFLLENBQUNlLElBQUksQ0FBQ2IscUJBQXFCLENBQUM7TUFBRUMsSUFBSSxFQUFFaUI7SUFBa0IsQ0FBQyxDQUFDO0lBQzdEcEIsY0FBSyxDQUFDQyxHQUFHLENBQ05DLHFCQUFxQixDQUFDO01BQUVDLElBQUksRUFBRXpCO0lBQWMsQ0FBQyxDQUFDLENBQzlDd0IscUJBQXFCLENBQUM7TUFBRUMsSUFBSSxFQUFFcEI7SUFBb0IsQ0FBQyxDQUFDLENBQ3BEbUIscUJBQXFCLENBQUM7TUFBRUMsSUFBSSxFQUFFLENBQUMsR0FBR3BCLG1CQUFtQixFQUFFcUMsaUJBQWlCO0lBQUUsQ0FBQyxDQUFDO0lBRS9FakMsZUFBZSxDQUFDLENBQUM7SUFFakIsTUFBTSxJQUFBa0IsZUFBTyxFQUFDLE1BQU07TUFDbEJDLE1BQU0sQ0FBQ0UsY0FBTSxDQUFDRyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQ0MsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUM7SUFFRkMsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDTixjQUFNLENBQUNHLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4REUsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDTixjQUFNLENBQUNDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUVoRCxNQUFNLElBQUFKLGVBQU8sRUFBQyxNQUFNO01BQ2xCQyxNQUFNLENBQUNOLGNBQUssQ0FBQ0MsR0FBRyxDQUFDLENBQUNNLG9CQUFvQixDQUFDLDBDQUEwQyxDQUFDO01BQ2xGRCxNQUFNLENBQUNFLGNBQU0sQ0FBQ0csWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUNDLFlBQVksQ0FBQyxDQUFDLENBQUM7SUFDN0QsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119