{"version":3,"names":["events_1","require","MongoMemoryServer_1","utils_1","debug_1","tslib_1","__importDefault","mongodb_1","MongoInstance_1","errors_1","fs_1","path_1","log","default","MongoMemoryReplSetStates","exports","MongoMemoryReplSetEvents","MongoMemoryReplSet","EventEmitter","constructor","opts","servers","_state","stopped","_ranCreateAuth","binaryOpts","Object","assign","binary","instanceOpts","_a","replSetOpts","replSet","stateChange","newState","args","emit","create","start","state","_instanceOpts","val","assertionIsMMSRSState","_binaryOpts","_replSetOpts","defaults","auth","name","count","dbName","generateDbName","ip","spawn","storageEngine","configSettings","assertion","ReplsetCountLowError","disable","authDefault","enableAuth","isNullOrUndefined","AuthNotObjectError","getInstanceOpts","baseOpts","keyfileLocation","concat","port","dbPath","replicaMemberConfig","launchTimeout","getUri","otherDb","otherIp","running","init","StateError","hosts","map","s","instanceInfo","Error","join","uriTemplate","undefined","ensureAsync","then","initAllServers","_initReplSet","catch","err","__awaiter","enabled","console","warn","stop","doCleanup","force","length","keyfilepath","resolve","ensureKeyFile","server","InstanceInfoError","instance","extraConnectionOptions","authSource","authMechanism","username","customRootName","password","customRootPwd","Promise","all","keyfilePath","forEach","index","push","_initServer","_keyfiletmp","createTmpDir","statPath","promises","writeFile","keyfileContent","mode","cleanupOptions","process","exitCode","cleanup","successfullyStopped","options","removeDir","waitUntilRunning","res","waitRunning","removeListener","on","uris","isInMemory","extraOptions","_c","_b","con","MongoClient","connect","directConnection","adminDb","db","members","uri","_id","host","getHost","rsConfig","writeConcernMajorityJournalDefault","settings","electionTimeoutMillis","command","replSetInitiate","_waitForPrimary","primary","find","isInstancePrimary","close","createAuth","MongoError","errmsg","config","oldConfig","replSetGetConfig","replSetReconfig","serverOpts","MongoMemoryServer","timeout","where","timeoutId","race","rej","once","MongoInstanceEvents","instancePrimary","_res","setTimeout","v","WaitForPrimaryTimeoutError","clearTimeout","wantedState","currentState"],"sources":["../src/MongoMemoryReplSet.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}